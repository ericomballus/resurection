(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[8289],{942:(t,e,o)=>{"use strict";o.r(e),o.d(e,{ProductManufacturedBuyPageModule:()=>P});var n=o(1511),r=o(6073),a=o(8777),i=o(8158),c=o(4762),s=o(9942),l=o(1572),u=o(4144),d=o(3437),g=o(4892),p=o(5075);function m(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"app-courses",7),l.NdJ("buyProduct",function(e){return l.CHM(t),l.oxw().buyItem(e)}),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("productResto",t.manufacturedItem)}}function f(t,e){if(1&t&&(l.TgZ(0,"div",8),l.TgZ(1,"div",9),l._uU(2),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(2),l.AsE(" ",t.totalItems," items = FCFA ",t.totalPrice," ")}}let h=(()=>{class t{constructor(t,e,o,n,r,a,i,c){this.restApiService=t,this.manageCartService=e,this.navCtrl=o,this.modalController=n,this.alertController=r,this.router=a,this.loadingController=i,this.socket=c,this.manufacturedItem=[],this.totalItems=0,this.totalPrice=0,this.takeProduct()}ngOnInit(){}takeProduct(){this.restApiService.getManufacturedProductItemResto2().subscribe(t=>{console.log(t),this.manufacturedItem=t})}buyItem(t){console.log(t);let e=t._id;if(this.cartValue=this.restApiService.getCart2(),this.cartValue&&this.cartValue.cart){let o={};o.product=t,o.cart=this.cartValue.cart;let n=this.manageCartService.addToCart(o);this.totalItems=n.totalQty,this.totalPrice=n.totalPrice;let r=[];r=n.generateArray().filter(t=>t.item._id===e);let a=this.manufacturedItem.findIndex(e=>e._id===t._id);t.qty=r[0].qty,this.manufacturedItem.splice(a,1,t),this.restApiService.saveCart({cart:n,products:n.generateArray()})}else{let o=this.manageCartService.addToCart(t);this.totalItems=o.totalQty,this.totalPrice=o.totalPrice;let n=[];n=o.generateArray().filter(t=>t.item._id===e);let r=this.manufacturedItem.findIndex(e=>e._id===t._id);t.qty=n[0].qty,this.manufacturedItem.splice(r,1,t),this.manufacturedItem.splice(r,1,t),this.restApiService.saveCart({cart:o,products:o.generateArray()})}}openCart(){return(0,c.mG)(this,void 0,void 0,function*(){console.log("hello...");const t=yield this.modalController.create({component:s.V,componentProps:{commande:!0}});return t.onDidDismiss().then(t=>{console.log(t),this.takeProduct(),this.restApiService.saveCart({}),t.data.cart?(this.totalItems=t.data.cart.totalQty,this.totalPrice=t.data.cart.totalPrice):(this.totalItems=0,this.totalPrice=0)}),yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(u.e),l.Y36(d.B),l.Y36(i.SH),l.Y36(i.IN),l.Y36(i.Br),l.Y36(a.F0),l.Y36(i.HT),l.Y36(g.sk))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-product-manufactured-buy"]],decls:14,vars:4,consts:[["slot","start"],["autoHide","false"],["slot","end"],[3,"disabled","click"],["color","dark","slot","end","name","cart"],[3,"productResto","buyProduct",4,"ngIf"],["class","footer",4,"ngIf"],[3,"productResto","buyProduct"],[1,"footer"],[1,"container","footer2"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-title"),l._uU(3,"manufactured-buy"),l.qZA(),l.TgZ(4,"ion-buttons",0),l._UZ(5,"ion-menu-button",1),l.qZA(),l.TgZ(6,"ion-buttons",2),l.TgZ(7,"ion-button",3),l.NdJ("click",function(){return e.openCart()}),l.TgZ(8,"ion-badge",2),l._uU(9),l.qZA(),l._UZ(10,"ion-icon",4),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"ion-content"),l.YNc(12,m,1,1,"app-courses",5),l.qZA(),l.YNc(13,f,3,2,"div",6)),2&t&&(l.xp6(7),l.Q6J("disabled",!e.totalItems),l.xp6(2),l.Oqu(e.totalItems),l.xp6(3),l.Q6J("ngIf",e.manufacturedItem.length),l.xp6(1),l.Q6J("ngIf",e.totalItems))},directives:[i.Gu,i.sr,i.wd,i.Sm,i.fG,i.YG,i.yp,i.gu,i.W2,n.O5,p.j],styles:[".lesbtn2[_ngcontent-%COMP%]{font-size:50%;text-transform:uppercase}.shopbtn[_ngcontent-%COMP%]{position:relative;left:8px}.col[_ngcontent-%COMP%]{align-items:center;background-color:aqua}.Btnitempack[_ngcontent-%COMP%], .col[_ngcontent-%COMP%]{text-align:center}ion-list[_ngcontent-%COMP%] > .productname[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700}.title[_ngcontent-%COMP%]{font-size:7px}.spane[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-weight:700}.spane[_ngcontent-%COMP%]{font-size:8px;position:absolute;bottom:70%;background-color:#151615;color:#fff}ion-card[_ngcontent-%COMP%]{box-shadow:none!important}segment-button-checked[_ngcontent-%COMP%]{background:#ff008c;color:var(--ion-color-primary);border-bottom:3px solid var(--ion-color-primary)}ion-segment-button[_ngcontent-%COMP%]{color:var(--ion-color-medium);border:0;border-radius:0}ion-segment[_ngcontent-%COMP%]{padding:0;margin:0}ion-segment-button[_ngcontent-%COMP%]{padding:0;margin:0;font-size:10px}.footer[_ngcontent-%COMP%]{background-color:#fff;padding:8%;position:relative}.footer2[_ngcontent-%COMP%]{background-color:#08d46e;padding:3%;text-align:center}ion-card-content[_ngcontent-%COMP%]{background-color:#f1f1f1;color:#000;padding:1%;text-align:center}.colp[_ngcontent-%COMP%]{font-size:10px;text-transform:uppercase;padding:0}.badge[_ngcontent-%COMP%]{position:absolute;top:7%}"]}),t})();var C=o(9547);const b=[{path:"",component:h}];let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[n.ez,r.u5,i.Pc,a.Bz.forChild(b),C.G]]}),t})()}}]);