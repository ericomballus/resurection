(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[9083],{9083:(t,o,i)=>{"use strict";i.r(o),i.d(o,{DisplayInventairePageModule:()=>C});var e=i(1511),n=i(6073),s=i(8158),a=i(8777),l=i(4762),r=i(1572),c=i(5946),h=i(4144),u=i(1064);function g(t,o){1&t&&(r.TgZ(0,"div"),r.TgZ(1,"ion-row",10),r.TgZ(2,"ion-col",11),r.TgZ(3,"div",12),r._uU(4),r.ALo(5,"translate"),r.qZA(),r.qZA(),r.TgZ(6,"ion-col",11),r.TgZ(7,"div",12),r._uU(8,"IN"),r.qZA(),r.qZA(),r.TgZ(9,"ion-col",11),r.TgZ(10,"div",12),r._uU(11,"Out"),r.qZA(),r.qZA(),r.TgZ(12,"ion-col",11),r.TgZ(13,"div",12),r._uU(14,"More"),r.qZA(),r.qZA(),r.TgZ(15,"ion-col",11),r.TgZ(16,"div",12),r._uU(17,"Res"),r.qZA(),r.qZA(),r.TgZ(18,"ion-col",11),r.TgZ(19,"div",12),r._uU(20,"rist"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(4),r.Oqu(r.lcZ(5,1,"MENU.name")))}const d=function(t){return{"background-color":t}};function Z(t,o){if(1&t&&(r.TgZ(0,"ion-row",15),r.TgZ(1,"ion-col",11),r.TgZ(2,"div",12),r._uU(3),r.qZA(),r.qZA(),r.TgZ(4,"ion-col",11),r.TgZ(5,"div",12),r._uU(6),r.qZA(),r.qZA(),r.TgZ(7,"ion-col",11),r.TgZ(8,"div",12),r._uU(9),r.qZA(),r.qZA(),r.TgZ(10,"ion-col",11),r.TgZ(11,"div",12),r._uU(12),r.qZA(),r.qZA(),r.TgZ(13,"ion-col",11),r.TgZ(14,"div",12),r._uU(15),r.qZA(),r.qZA(),r.TgZ(16,"ion-col",11),r.TgZ(17,"div",12),r._uU(18),r.ALo(19,"number"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=o.$implicit;r.Q6J("ngStyle",r.VKq(10,d,o.index%2==0?"#f1f1f1":"white")),r.xp6(3),r.Oqu(t.name),r.xp6(3),r.Oqu(t.start),r.xp6(3),r.Oqu(t.out),r.xp6(3),r.Oqu(t.more?t.more:0),r.xp6(3),r.hij(" ",t.start?t.start-t.out:0," "),r.xp6(3),r.hij(" ",t.ristourne?r.xi3(19,7,t.ristourne,"1.0-0"):0," ")}}function m(t,o){if(1&t&&(r.TgZ(0,"ion-row",16),r.TgZ(1,"ion-col",11),r.TgZ(2,"div",17),r._uU(3,"total"),r.qZA(),r.qZA(),r.TgZ(4,"ion-col",11),r.TgZ(5,"div",18),r._uU(6),r.qZA(),r.qZA(),r.TgZ(7,"ion-col",11),r.TgZ(8,"div",18),r._uU(9),r.qZA(),r.qZA(),r.TgZ(10,"ion-col",11),r.TgZ(11,"div",18),r._uU(12),r.qZA(),r.qZA(),r.TgZ(13,"ion-col",11),r.TgZ(14,"div",18),r._uU(15),r.qZA(),r.qZA(),r.TgZ(16,"ion-col",11),r.TgZ(17,"div",18),r._uU(18),r.ALo(19,"currency"),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw(2);r.xp6(6),r.Oqu(t.totalProduct),r.xp6(3),r.Oqu(t.totalOut),r.xp6(3),r.Oqu(t.totalLost?t.totalLost:0),r.xp6(3),r.Oqu(t.totalReste),r.xp6(3),r.hij(" ",r.gM2(19,5,t.total_ristourne,"CFA","symbol","3.0-0")," ")}}function p(t,o){if(1&t&&(r.TgZ(0,"div"),r.YNc(1,Z,20,12,"ion-row",13),r.YNc(2,m,20,10,"ion-row",14),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.invoices),r.xp6(1),r.Q6J("ngIf",t.total_amount)}}const A=function(){return{"background-color":"red"}};function T(t,o){if(1&t&&(r.TgZ(0,"ion-col",19),r.TgZ(1,"div",7),r._uU(2),r.ALo(3,"currency"),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.Q6J("ngStyle",r.DdM(7,A)),r.xp6(2),r.hij(" ",r.gM2(3,2,t.TotalCash,"CFA","symbol","3.0-0")," ")}}const _=function(){return{"background-color":"#0ef82d"}};function f(t,o){if(1&t&&(r.TgZ(0,"ion-col",19),r.TgZ(1,"div",7),r._uU(2),r.ALo(3,"currency"),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.Q6J("ngStyle",r.DdM(7,_)),r.xp6(2),r.hij(" ",r.gM2(3,2,t.displayAmount,"CFA","symbol","3.0-0")," ")}}const q=[{path:"",component:(()=>{class t{constructor(t,o,i,e){this.loadingController=t,this.adminService=o,this.route=i,this.resApi=e,this.isLoading=!1,this.total_amount=0,this.total_glace=0,this.total_nonglace=0,this.total_ristourne=0,this.total_quantity=0,this.totalBu=0,this.totalBenefice=0,this.totalProduct=0,this.totalOut=0,this.totalReste=0,this.totalEx=0,this.totalLost=0,this.totalRistourne=0,this.openCash=0,this.closeCash=0,this.TotalCash=0,this.displayAmount=0,this.reback=!1,this.manageStockWithService=!1,this.getInventory()}ngOnInit(){localStorage.removeItem("firstTime")}getSetting(){let t=JSON.parse(localStorage.getItem("setting"));console.log(t),t.length?this.manageStockWithService=t[0].manageStockWithService:t.manageStockWithService&&(this.manageStockWithService=t.manageStockWithService)}goToStartPage(){this.route.navigateByUrl("inventaire-list")}getInventory(){this.manageStockWithService?JSON.parse(localStorage.getItem("open"))?this.makeInventaireRandom(this.d):this.adminService.getAdminInventory().subscribe(t=>{let o=[];o=t.docs.filter(t=>t.out>0),o.forEach(t=>{t.name=t.name.toUpperCase()}),this.openCash=0,this.openCash=t.cash.cashFund,this.closeCash=t.cash.closing_cash,this.invoices=o.sort((t,o)=>t.name>o.name?1:o.name>t.name?-1:0),JSON.parse(localStorage.getItem("cashClose"))||(this.closeCash=t.cash.closing_cash),this.invoices.forEach(t=>{console.log(t),t.totalSalesAmount&&(this.total_amount=this.total_amount+t.totalSalesAmount),t.ristourneGenerate&&(this.total_ristourne=this.total_ristourne+t.ristourneGenerate),t.beneficeTota&&(this.totalBenefice=this.totalBenefice+t.beneficeTotal),this.totalProduct=this.totalProduct+t.start,this.totalOut=this.totalOut+t.out,this.totalReste=t.remaining?this.totalReste+(t.start-t.out-t.remaining):this.totalReste+(t.start-t.out),t.remaining&&(this.totalBu=this.totalBu+t.remaining),t.more&&(this.totalEx=this.totalEx+t.more),t.more&&(this.totalLost=this.totalLost+t.more),this.total_quantity=this.total_quantity+t.out}),this.TotalCash=this.total_amount+this.openCash-this.closeCash,this.displayAmount=this.TotalCash<0?-1*this.TotalCash:0,console.log(this.displayAmount),console.log(this.TotalCash),this.getProductItem(this.d)}):this.adminService.getAdminInventory().subscribe(t=>{console.log(t),this.openCash=0,t.docs.forEach(t=>{t.name=t.name.toUpperCase()}),this.invoices=t.docs.sort((t,o)=>t.name>o.name?1:o.name>t.name?-1:0),this.openCash=t.cash.cashFund,this.closeCash=t.cash.closing_cash,this.invoices.forEach(t=>{t.totalSalesAmount&&(this.total_amount=this.total_amount+t.totalSalesAmount),t.ristourneGenerate&&(this.total_ristourne=this.total_ristourne+t.ristourneGenerate),t.beneficeTotal&&(this.totalBenefice=this.totalBenefice+t.beneficeTotal),this.totalProduct=this.totalProduct+t.start,this.totalOut=this.totalOut+t.out,this.totalReste=t.remaining?this.totalReste+(t.start-t.out-t.remaining):this.totalReste+(t.start-t.out),t.remaining&&(this.totalBu=this.totalBu+t.remaining),t.more&&(console.log("hello",t.more),this.totalEx=this.totalEx+t.more),this.total_quantity=this.total_quantity+t.out}),this.TotalCash=this.total_amount+this.openCash-this.closeCash,this.displayAmount=this.TotalCash<0?-1*this.TotalCash:0,localStorage.removeItem("orherIdDay");let o=JSON.parse(localStorage.getItem("openCashDateObj"))._id;this.getProductItem(o)})}presentLoading2(){return(0,l.mG)(this,void 0,void 0,function*(){return this.isLoading=!0,yield this.loadingController.create({duration:6e4}).then(t=>{t.present().then(()=>{this.isLoading||t.dismiss().then()})})})}dismissLoading(){return(0,l.mG)(this,void 0,void 0,function*(){return this.isLoading=!1,yield this.loadingController.dismiss().then()})}makeInventaireRandom(t){console.log(this.d),this.adminService.getAdminInventoryRandom(t).subscribe(o=>{console.log(o),this.total_amount=0,o.docs.forEach(t=>{t.name=t.name.toUpperCase()}),this.openCash=t.cashFund,this.closeCash=0,o.docs=o.docs.filter(t=>t.out>0),this.invoices=o.docs.sort((t,o)=>t.name>o.name?1:o.name>t.name?-1:0),this.invoices.forEach(t=>{t.totalSalesAmount&&(this.total_amount=this.total_amount+t.totalSalesAmount),t.ristourneGenerate&&(this.total_ristourne=this.total_ristourne+t.ristourneGenerate),t.beneficeTota&&(this.totalBenefice=this.totalBenefice+t.beneficeTotal),this.totalProduct=this.totalProduct+t.start,this.totalOut=this.totalOut+t.out,this.totalReste=t.remaining?this.totalReste+(t.start-t.out-t.remaining):t.more?this.totalReste+(t.start-t.out)+t.remaining:this.totalReste+(t.start-t.out),t.remaining&&(this.totalBu=this.totalBu+t.remaining),t.more&&(this.totalEx=this.totalEx+t.more),t.remaining&&(this.totalLost=this.totalLost+t.remaining),this.total_quantity=this.total_quantity+t.out}),this.TotalCash=this.total_amount+this.openCash-this.closeCash,this.displayAmount=this.TotalCash<0?-1*this.TotalCash:0,console.log(this.displayAmount),console.log(this.TotalCash)})}getProductItem(t){this.resApi.getProductItemGroup2().subscribe(o=>{this.total_ristourne=0,console.log(o),this.invoices.forEach((i,e)=>{let n=o.items.filter(t=>t._id==i.productItemsId);n.length&&this.getRistourne(n[0],e,t)})})}getRistourne(t,o,i){let e=JSON.parse(localStorage.getItem("d"));if(e||(e=JSON.parse(localStorage.getItem("openCashDateObj"))),t.ristourneTab){let i=t.ristourneTab.filter(t=>t.openCashDateId==e._id),n=0;i.forEach(t=>{t.ristourne>0&&(n+=t.ristourne)}),this.total_ristourne=this.total_ristourne+n,this.invoices[o].ristourne=n}}}return t.\u0275fac=function(o){return new(o||t)(r.Y36(s.HT),r.Y36(c.l),r.Y36(a.F0),r.Y36(h.e))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-display-inventaire"]],decls:43,vars:34,consts:[["slot","start"],[3,"click"],[4,"ngIf"],[1,"separation"],[1,"lastDiv"],[1,"rowInventaire"],["size","3",1,"ion-align-self-center"],[1,"ion-text-center","ion-text-uppercase"],["size","3"],["size","3","class","ion-align-self-center",3,"ngStyle",4,"ngIf"],[1,"header-row"],["size","2",1,"ion-align-self-center"],[1,"ion-text-center"],["class","data-row data-update",3,"ngStyle",4,"ngFor","ngForOf"],["class","data-lastrow data-update",4,"ngIf"],[1,"data-row","data-update",3,"ngStyle"],[1,"data-lastrow","data-update"],[1,"ion-text-center","inte","ion-text-uppercase"],[1,"ion-text-center","inte"],["size","3",1,"ion-align-self-center",3,"ngStyle"]],template:function(t,o){1&t&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r._UZ(2,"ion-title"),r.TgZ(3,"ion-buttons",0),r.TgZ(4,"ion-back-button",1),r.NdJ("click",function(){return o.goToStartPage()}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(5,"ion-content"),r.YNc(6,g,21,3,"div",2),r.YNc(7,p,3,2,"div",2),r.TgZ(8,"div"),r._UZ(9,"ion-row",3),r.qZA(),r.TgZ(10,"div",4),r.TgZ(11,"ion-row",5),r.TgZ(12,"ion-col",6),r.TgZ(13,"div",7),r._uU(14),r.ALo(15,"translate"),r.qZA(),r.qZA(),r.TgZ(16,"ion-col",8),r.TgZ(17,"div",7),r._uU(18),r.ALo(19,"translate"),r.qZA(),r.qZA(),r.TgZ(20,"ion-col",8),r.TgZ(21,"div",7),r._uU(22),r.ALo(23,"translate"),r.qZA(),r.qZA(),r.TgZ(24,"ion-col",6),r.TgZ(25,"div",7),r._uU(26),r.ALo(27,"translate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(28,"ion-row"),r.TgZ(29,"ion-col",6),r.TgZ(30,"div",7),r._uU(31),r.ALo(32,"currency"),r.qZA(),r.qZA(),r.TgZ(33,"ion-col",8),r.TgZ(34,"div",7),r._uU(35),r.ALo(36,"currency"),r.qZA(),r.qZA(),r.TgZ(37,"ion-col",8),r.TgZ(38,"div",7),r._uU(39),r.ALo(40,"currency"),r.qZA(),r.qZA(),r.YNc(41,T,4,8,"ion-col",9),r.YNc(42,f,4,8,"ion-col",9),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(6),r.Q6J("ngIf",o.invoices),r.xp6(1),r.Q6J("ngIf",o.invoices),r.xp6(7),r.hij(" ",r.lcZ(15,11,"MENU.notfound")," "),r.xp6(4),r.hij(" ",r.lcZ(19,13,"MENU.opencash")," "),r.xp6(4),r.hij(" ",r.lcZ(23,15,"MENU.closecash")," "),r.xp6(4),r.hij(" ",r.lcZ(27,17,"MENU.reste")," "),r.xp6(5),r.hij(" ",r.gM2(32,19,o.total_amount,"CFA","symbol","3.0-0")," "),r.xp6(4),r.hij(" ",r.gM2(36,24,o.openCash,"CFA","symbol","2.0-0")," "),r.xp6(4),r.hij(" ",r.gM2(40,29,o.closeCash,"CFA","symbol","3.0-0")," "),r.xp6(2),r.Q6J("ngIf",o.TotalCash>=0&&o.displayAmount<=0),r.xp6(1),r.Q6J("ngIf",o.TotalCash<=0&&o.displayAmount>=0))},directives:[s.Gu,s.sr,s.wd,s.Sm,s.oU,s.cs,s.W2,e.O5,s.Nd,s.wI,e.sg,e.PC],pipes:[u.X$,e.H9,e.JJ],styles:[".userName[_ngcontent-%COMP%]{font-size:11px;position:absolute;left:80%;bottom:8%;color:#fa3434}.tableNumber[_ngcontent-%COMP%]{font-size:2px;position:absolute;left:50%;bottom:40%}ion-col[_ngcontent-%COMP%]   .inte[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:9px}.data-lastrow[_ngcontent-%COMP%]{background-color:#f1f1f1}.data-lastrow[_ngcontent-%COMP%], .header-row[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:9px}.rowInventaire[_ngcontent-%COMP%]{background-color:#f1f1f1;padding-top:10px;padding-bottom:10px}.rowInventaire[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:9px}.separation[_ngcontent-%COMP%]{background-color:#111;padding-top:10px;padding-bottom:10px}.separation[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:9px}.lastDiv[_ngcontent-%COMP%], .resume[_ngcontent-%COMP%]{padding-top:15px}.icone[_ngcontent-%COMP%]{font-size:30px}"]}),t})()}];let v=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[a.Bz.forChild(q)],a.Bz]}),t})(),C=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[e.ez,n.u5,s.Pc,v,u.aw.forChild()]]}),t})()}}]);