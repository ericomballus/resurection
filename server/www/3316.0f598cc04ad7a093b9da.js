(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[3316],{3316:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AddEmployeeRetailerPageModule:()=>f});var o=i(1511),n=i(6073),s=i(8777),r=i(8158),a=i(4762),l=i(1572),c=i(2181),d=i(5946),u=i(9719),g=i(2874);function p(e,t){if(1&e&&(l.TgZ(0,"ion-select-option",15),l._uU(1),l.qZA()),2&e){const e=t.$implicit;l.s9C("value",e.id),l.xp6(1),l.Oqu(e.name)}}function m(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ion-item"),l.TgZ(1,"ion-label"),l._uU(2,"ADD STORE"),l.qZA(),l.TgZ(3,"ion-select",13),l.NdJ("ionChange",function(t){return l.CHM(e),l.oxw().assignSore(t)}),l.YNc(4,p,2,2,"ion-select-option",14),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(4),l.Q6J("ngForOf",e.storeList)}}const h=[{path:"",component:(()=>{class e{constructor(e,t,i,o,n){this.authService=e,this.adminService=t,this.toastController=i,this.getstoreList=o,this.notif=n,this.storeList=[],this.role=[],this.getUserStore(),this.takeUserRoles()}ngOnInit(){}register(e){console.log(e.value),this.notif.presentLoading(),localStorage.getItem("adminemail")?(e.value.adminEmail=localStorage.getItem("adminemail"),1==this.storeList.length&&(this.storeId=this.storeList[0].id),this.storeId&&(e.value.storeId=this.storeId),e.value.isRetailer=!0,e.value.role=this.role,e.value.phone=e.value.telephone,this.authService.addEmployee(e.value).subscribe(e=>{console.log("retour ici",e),this.notif.dismissLoading(),this.notif.presentToast("add ok","success")},e=>{this.notif.dismissLoading(),this.notif.presentError("remote error please check if remain field","danger")})):(this.notif.dismissLoading(),this.notif.presentError("please provide admin email","danger"))}getUserStore(){return(0,a.mG)(this,void 0,void 0,function*(){JSON.parse(localStorage.getItem("credentialAccount")).users[0].storeId&&(this.storeList=JSON.parse(localStorage.getItem("credentialAccount")).users[0].storeId)})}assignSore(e){return(0,a.mG)(this,void 0,void 0,function*(){this.storeId=e.target.value})}takeUserRoles(){this.adminService.getUserRole().subscribe(e=>{this.roles=e.roles,this.roles.forEach(e=>{6==e.numberId&&this.role.push(e)})})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(c.u),l.Y36(d.l),l.Y36(r.yF),l.Y36(u.$),l.Y36(g.g))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-add-employee-retailer"]],decls:22,vars:2,consts:[["color","primary"],["slot","start"],["defaultHref","/start"],[3,"ngSubmit"],["form","ngForm"],["name","name","type","text","placeholder","Name","ngModel","","required",""],["name","telephone","type","number","placeholder","phone number","ngModel","","required",""],["name","ville","type","text","placeholder","ville","ngModel","","required",""],["name","quartier","type","text","placeholder","quartier","ngModel","","required",""],[4,"ngIf"],["name","password","type","password","placeholder","Password","ngModel","","required",""],["name","confirm","type","password","placeholder","Password again","ngModel","","required",""],["color","danger","size","large","type","submit","expand","block",3,"disabled"],["cancelText","cancel","okText","Okay","interface","popover",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar",0),l.TgZ(2,"ion-buttons",1),l._UZ(3,"ion-back-button",2),l.qZA(),l.qZA(),l.qZA(),l.TgZ(4,"ion-content"),l.TgZ(5,"form",3,4),l.NdJ("ngSubmit",function(){l.CHM(e);const i=l.MAs(6);return t.register(i)}),l.TgZ(7,"ion-item"),l._UZ(8,"ion-input",5),l.qZA(),l.TgZ(9,"ion-item"),l._UZ(10,"ion-input",6),l.qZA(),l.TgZ(11,"ion-item"),l._UZ(12,"ion-input",7),l.qZA(),l.TgZ(13,"ion-item"),l._UZ(14,"ion-input",8),l.qZA(),l.YNc(15,m,5,1,"ion-item",9),l.TgZ(16,"ion-item"),l._UZ(17,"ion-input",10),l.qZA(),l.TgZ(18,"ion-item"),l._UZ(19,"ion-input",11),l.qZA(),l.TgZ(20,"ion-button",12),l._uU(21,"Register"),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.MAs(6);l.xp6(15),l.Q6J("ngIf",t.storeList.length>1),l.xp6(5),l.Q6J("disabled",e.invalid)}},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.W2,n.Y7,n.JL,n.F,r.Ie,r.pK,r.j9,n.JJ,n.On,n.Q7,r.as,o.O5,r.YG,r.Q$,r.t9,r.QI,o.sg,r.n0],styles:[""]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[o.ez,n.u5,r.Pc,s.Bz.forChild(h)]]}),e})()}}]);