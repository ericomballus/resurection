(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[1898],{1898:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ProductPackItemAddPageModule:()=>P});var o=n(1511),i=n(6073),s=n(8777),c=n(8158),r=n(4762),a=n(5137),l=n(691),d=n(1572),u=n(4144),p=n(731),h=n(1064),m=n(4892);function g(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"ion-item",8),d.TgZ(1,"ion-label",10),d.TgZ(2,"p",11),d._uU(3),d.qZA(),d.TgZ(4,"p"),d._uU(5),d.qZA(),d.TgZ(6,"p",11),d._uU(7),d.qZA(),d.qZA(),d.TgZ(8,"ion-button",12),d.NdJ("click",function(){d.CHM(t);const n=e.$implicit;return d.oxw(2).presentActionSheet(n)}),d._UZ(9,"ion-icon",13),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit;d.xp6(3),d.Oqu(t.name),d.xp6(2),d.AsE("",t.purchasingPrice," -- ",t.sellingPrice,""),d.xp6(2),d.lnq(" ",t.quantity," * ",t.itemsInPack," = ",t.totalItems," ")}}function f(t,e){if(1&t&&(d.TgZ(0,"ion-list",8),d.YNc(1,g,10,6,"ion-item",9),d.qZA()),2&t){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.packs)}}const k=function(){return["/product-buy"]},b=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i,s,c,r){this.restApiService=t,this.modalController=e,this.alertController=n,this.actionSheetController=o,this.toastController=i,this.translateConfigService=s,this.translate=c,this.socket=r,this.tabRoles=[],this.takePackItems(),this.languageChanged()}ngOnInit(){console.log("ProductPackItemAddsPage"),this.tabRoles=JSON.parse(localStorage.getItem("roles")),(this.tabRoles.includes(1)||this.tabRoles.includes(2))&&(this.adminId=localStorage.getItem("adminId"),this.webServerSocket(this.adminId))}languageChanged(){let t=localStorage.getItem("language");t&&this.translateConfigService.setLanguage(t)}takePackItems(){this.restApiService.getPackItem().subscribe(t=>{t.items.forEach(t=>{t.totalItems=t.quantity*t.itemsInPack}),this.packs=t.items})}webServerSocket(t){this.socket.connect(),this.socket.emit("set-name",name),this.socket.fromEvent(`${t}newPackItem`).subscribe(t=>(0,r.mG)(this,void 0,void 0,function*(){this.packs.unshift(t)})),this.socket.fromEvent(`${t}packItem`).subscribe(t=>(0,r.mG)(this,void 0,void 0,function*(){this.takePackItems()}))}updatePackItems(t){return(0,r.mG)(this,void 0,void 0,function*(){t.flag="update";const e=yield this.modalController.create({component:a.q,componentProps:{product:t}});return e.onDidDismiss().then(t=>{"error"===t.data?console.log("hello"):this.presentToast()}),yield e.present()})}displayDetails(t){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:l.v,componentProps:{product:t}});return e.onDidDismiss().then(t=>{"erico"===t.data&&console.log("hello")}),yield e.present()})}presentAlert(t){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.alertController.create({header:"ELPIS",subHeader:` ${t}`,buttons:["OK"]});yield e.present()})}deletePackItems(t){let e=t._id;this.restApiService.deletePackItem(e).subscribe(t=>{this.packs=this.packs.filter(t=>t._id!==e)})}presentActionSheet(t){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.actionSheetController.create({header:"Albums",buttons:[{text:"Delete",role:"destructive",icon:"trash",handler:()=>{this.deletePackItems(t)}},{text:"View Details",icon:"heart",handler:()=>{this.displayDetails(t)}},{text:"Cancel",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield e.present()})}presentToast(){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"product have been save.",duration:2e3,position:"top",animated:!0,cssClass:"my-custom-class"})).present()})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(u.e),d.Y36(c.IN),d.Y36(c.Br),d.Y36(c.BX),d.Y36(c.yF),d.Y36(p.w),d.Y36(h.sK),d.Y36(m.sk))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-product-pack-item-add"]],decls:12,vars:6,consts:[["color","primary"],[1,"titre"],["slot","end"],[3,"routerLink"],["name","add-circle-outline"],["slot","start"],["autoHide","false"],["lines","full",4,"ngIf"],["lines","full"],["lines","full",4,"ngFor","ngForOf"],[1,"ion-text-wrap"],[1,"name"],["size","small","color","warning",3,"click"],["name","eye"]],template:function(t,e){1&t&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar",0),d.TgZ(2,"ion-title",1),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"ion-buttons",2),d.TgZ(6,"ion-button",3),d._UZ(7,"ion-icon",4),d.qZA(),d.qZA(),d.TgZ(8,"ion-buttons",5),d._UZ(9,"ion-menu-button",6),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"ion-content"),d.YNc(11,f,2,1,"ion-list",7),d.qZA()),2&t&&(d.xp6(3),d.Oqu(d.lcZ(4,3,"MENU.packs")),d.xp6(3),d.Q6J("routerLink",d.DdM(5,k)),d.xp6(5),d.Q6J("ngIf",e.packs))},directives:[c.Gu,c.sr,c.wd,c.Sm,c.YG,c.YI,s.rH,c.gu,c.fG,c.W2,o.O5,c.q_,o.sg,c.Ie,c.Q$],pipes:[h.X$],styles:[".lesbtn2[_ngcontent-%COMP%]{font-size:50%;text-transform:uppercase;position:relative;top:35%;right:20%}ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;text-transform:uppercase}.packName[_ngcontent-%COMP%]{position:absolute;bottom:55%}.packName[_ngcontent-%COMP%], .packUnit[_ngcontent-%COMP%]{font-size:12px}.divBtn[_ngcontent-%COMP%]{height:10px;width:15}.divBtn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-size:55%}.divBtnUpdate[_ngcontent-%COMP%]{position:relative;right:30%}.name[_ngcontent-%COMP%]{font-weight:700}"]}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[o.ez,i.u5,c.Pc,s.Bz.forChild(b),h.aw.forChild()]]}),t})()}}]);