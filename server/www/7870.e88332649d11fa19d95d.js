(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[7870],{7870:(t,e,n)=>{"use strict";n.r(e),n.d(e,{VendorShopPageModule:()=>k});var o=n(1511),i=n(6073),s=n(8158),r=n(8777),a=n(4762),c=n(1572),l=n(3400),d=n(4144);const p=function(){return{opacity:"0.2"}};function g(t,e){1&t&&(c.TgZ(0,"div",15),c._uU(1," 0 CFA "),c.qZA()),2&t&&c.Q6J("ngStyle",c.DdM(1,p))}const u=function(t){return{opacity:t}};function h(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",9),c.TgZ(1,"div",10),c._UZ(2,"img",11),c.qZA(),c.TgZ(3,"div",12),c.TgZ(4,"p"),c._uU(5),c._UZ(6,"br"),c._uU(7),c._UZ(8,"br"),c._uU(9),c.qZA(),c.qZA(),c.TgZ(10,"div",13),c.TgZ(11,"ion-input",14),c.NdJ("ngModelChange",function(t){return e.$implicit.inputValue=t})("ionChange",function(n){c.CHM(t);const o=e.$implicit;return c.oxw(2).getValue(n,o)}),c.qZA(),c.qZA(),c.TgZ(12,"div",13),c.TgZ(13,"div",15),c._uU(14),c.ALo(15,"currency"),c.qZA(),c.YNc(16,g,2,2,"div",16),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.Q6J("src",t.url,c.LSH),c.xp6(3),c.hij(" ",t.name,""),c.xp6(2),c.AsE(" ",t.sizeUnitProduct," ",t.unitNameProduct,""),c.xp6(2),c.hij(" ",t.cassier," cassier "),c.xp6(2),c.Q6J("ngModel",t.inputValue),c.xp6(2),c.Q6J("ngStyle",c.VKq(14,u,t.fisrtValueAdd&&t.fisrtValueAdd>=0?"1":"0.2")),c.xp6(1),c.hij(" ",c.gM2(15,9,t.fisrtValueAdd*t.packPrice,"CFA","symbol","3.0-0")," "),c.xp6(2),c.Q6J("ngIf",!t.fisrtValueAdd)}}function f(t,e){if(1&t&&(c.TgZ(0,"div",7),c.YNc(1,h,17,16,"div",8),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.packs)}}function m(t,e){if(1&t&&(c.TgZ(0,"div",17),c.TgZ(1,"div",18),c._uU(2),c.ALo(3,"currency"),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(2),c.AsE(" ",t.totalItems," items = FCFA ",c.gM2(3,2,t.totalPrice,"CFA","symbol","3.0-0")," ")}}const b=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i){this.selectVendor=t,this.restApiService=e,this.router=n,this.loadingController=o,this.alertController=i,this.products=[],this.packs=[],this.randomObj={},this.totalItems=0,this.totalPrice=0,this.vendor=this.selectVendor.getData(),console.log(this.vendor),this.takePack(),setTimeout(()=>{this.takeProduct(),this.takePackitems()},600)}ngOnInit(){}takeProduct(){this.restApiService.getVendorProductItem(this.vendor.vendorId).subscribe(t=>{console.log(t),this.products=t,this.products.length>0&&this.products.forEach(t=>{this.packs.forEach(e=>{if(e.productId==t.productId){let n=t.quantityStore/t.packSize;console.log(t),console.log(e),e.cassier=parseInt(n.toString()),e.btls=t.quantityStore%t.packSize,e.packPrice=t.packSize*t.sellingPrice,e.avaible=t.packSize*t.sellingPrice}}),console.log(this.packs)})})}takePackitems(){this.restApiService.getVendorProducts(this.vendor.vendorId).subscribe(t=>{console.log(t),t.products.forEach(t=>{this.packs.forEach(t=>{})})})}takePack(){this.restApiService.getVendorPack(this.vendor.vendorId).subscribe(t=>{console.log(t),this.packs=t})}getValueBtl(t,e){let n=parseInt(t.target.value),o=e._id,i=n,s=this.randomObj[o];i&&i>0?(console.log("hi"),e.sizePack&&i>=e.sizePack?e.nbrBtl="":(console.log("hello 12"),s?i?e.packPrice&&(console.log(this.randomObj[o]),this.randomObj[o].prod.nbrBtl=i):this.randomObj[o].prod.nbrBtl=0:e.packPrice&&(this.randomObj[o]={sale:0,coast:0,prod:e,item:e,qty:0,price:0},e.nbrBtl=i))):(e.nbrBtl=0,s||(e.packPrice?(this.randomObj[o]={sale:0,coast:0,prod:e,item:e,qty:0,price:0},e.nbrBtl=0):e.packPrice&&(console.log(this.randomObj[o]),this.randomObj[o].prod.nbrBtl=i)))}getValue(t,e){return(0,a.mG)(this,void 0,void 0,function*(){let n=parseInt(t.target.value),o=e._id,i=n;if(console.log(i),i||(e.fisrtValueAdd=0,delete this.randomObj[o]),e.cassier>=i){this.randomObj[o]?(delete this.randomObj[o],i?e.packPrice?(this.randomObj[o]={sale:i,coast:i*parseInt(e.packPrice),prod:e,item:e,qty:i,price:i*parseInt(e.packPrice)},e.fisrtValueAdd=i):this.randomObj[o]={sale:i,coast:0,prod:e}:console.log("no nbr")):e.packPrice?(this.randomObj[o]={sale:i,coast:i*parseInt(e.packPrice),prod:e,item:e,qty:i,price:i*parseInt(e.packPrice)},e.fisrtValueAdd=i):this.randomObj[o]={sale:i,coast:0,prod:e};let t=Object.keys(this.randomObj);for(const e of t)this.randomObj[e].prod.removeQuantity=this.randomObj[e].sale;console.log(this.randomObj),console.log(this.generateArray(this.randomObj));let n=this.generateArray(this.randomObj);this.totalItems=0,this.totalPrice=0,n.forEach(t=>{this.totalItems=this.totalItems+t.qty,this.totalPrice=this.totalPrice+t.coast})}else{isNaN(i)||this.presentAlert(),t.target.value="";let e=this.generateArray(this.randomObj);this.totalItems=0,this.totalPrice=0,e.forEach(t=>{this.totalItems=this.totalItems+t.qty,this.totalPrice=this.totalPrice+t.coast})}})}generateArray(t){const e=[];for(var n in t)e.push(t[n]);return this.cart=e,e}openCart(){this.selectVendor.setCart(this.cart),this.router.navigateByUrl("/vendor-cart")}presentAlert(){return(0,a.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Not avaible",message:"quantit\xe9 choisi pas disponible. <h2>hello</h2><ion-icon name='close-outline'></ion-icon>",buttons:["OK"]});yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(l.A),c.Y36(d.e),c.Y36(r.F0),c.Y36(s.HT),c.Y36(s.Br))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-vendor-shop"]],decls:12,vars:4,consts:[["slot","start"],["defaultHref","/purchase"],["slot","end"],[3,"disabled","click"],["color","dark","slot","end","name","cart"],["lines","full",4,"ngIf"],["class","footer",4,"ngIf"],["lines","full"],["class","divitem","lines","full",4,"ngFor","ngForOf"],["lines","full",1,"divitem"],[1,"img-container"],["width","25px","height","25px",3,"src"],[1,"inItem","inItem3"],[1,"inItem"],["slot","end","placeholder","Enter ","type","number","debounce","200",3,"ngModel","ngModelChange","ionChange"],[1,"inItem2","displayPrice",3,"ngStyle"],["class","inItem2 displayPrice",3,"ngStyle",4,"ngIf"],[1,"footer"],[1,"container","footer2"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c._UZ(3,"ion-back-button",1),c.qZA(),c.TgZ(4,"ion-buttons",2),c.TgZ(5,"ion-button",3),c.NdJ("click",function(){return e.openCart()}),c.TgZ(6,"ion-badge",2),c._uU(7),c.qZA(),c._UZ(8,"ion-icon",4),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"ion-content"),c.YNc(10,f,2,1,"div",5),c.qZA(),c.YNc(11,m,4,7,"div",6)),2&t&&(c.xp6(5),c.Q6J("disabled",!e.totalPrice),c.xp6(2),c.Oqu(e.totalItems),c.xp6(3),c.Q6J("ngIf",e.packs),c.xp6(1),c.Q6J("ngIf",e.totalItems))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.YG,s.yp,s.gu,s.W2,o.O5,o.sg,s.pK,s.as,i.JJ,i.On,o.PC],pipes:[o.H9],styles:[".badge[_ngcontent-%COMP%], .badge2[_ngcontent-%COMP%]{width:25%;position:absolute;top:7%;display:flex;justify-content:space-between;font-size:13px}.badge2[_ngcontent-%COMP%]{padding:5px;z-index:2}.colstyle[_ngcontent-%COMP%]{border-radius:5%;border:1px solid #f1f1f1}.cardimage[_ngcontent-%COMP%]{text-align:center}.divitem[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap}.inItem[_ngcontent-%COMP%]{flex-grow:1;width:25%}.inItem2[_ngcontent-%COMP%]{text-align:center}.inItem3[_ngcontent-%COMP%]{font-size:10px;padding-left:10px;font-weight:700;text-transform:uppercase}.divBtn[_ngcontent-%COMP%]{display:flex}div[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{background-color:#f1f1f1}.displayPrice[_ngcontent-%COMP%]{font-size:11px}.footer[_ngcontent-%COMP%]{background-color:#fff;padding:8%;position:relative}.footer2[_ngcontent-%COMP%]{background-color:#08d46e;padding:3%;text-align:center}.img-container[_ngcontent-%COMP%]{text-align:center;display:block}"]}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.Bz.forChild(b)],r.Bz]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.ez,i.u5,s.Pc,P]]}),t})()}}]);