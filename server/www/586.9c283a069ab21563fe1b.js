(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[586],{586:(e,t,o)=>{"use strict";o.r(t),o.d(t,{AddExpensePageModule:()=>x});var i=o(1511),s=o(6073),n=o(8158),r=o(8777),a=o(4762),c=o(1572),l=o(1592),g=o(2874),u=o(4375),p=o(1064);const d=["form"];function h(e,t){if(1&e&&(c.TgZ(0,"ion-select-option",11),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e._id),c.xp6(1),c.Oqu(e.name)}}function f(e,t){if(1&e&&(c.TgZ(0,"ion-select-option",11),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e.id),c.xp6(1),c.Oqu(e.name)}}function m(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"ion-item"),c.TgZ(1,"ion-label"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"ion-select",12),c.NdJ("ionChange",function(t){return c.CHM(e),c.oxw().assignStore(t)}),c.YNc(5,f,2,2,"ion-select-option",5),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"MENU.store")),c.xp6(3),c.Q6J("ngForOf",e.userStore)}}const Z=[{path:"",component:(()=>{class e{constructor(e,t,o){this.expenseService=e,this.notifi=t,this.saveRandom=o,this.categories=[],this.userStore=[],this.categorieId=null,this.storeId=null,this.reason=null}ngOnInit(){}ionViewWillEnter(){let e=this.saveRandom.getStoreList();JSON.parse(localStorage.getItem("setting")),this.userStore=e,this.storeId=this.userStore[0].id,this.getCategorie()}getCategorie(){this.expenseService.getLocalCategorie().length?this.categories=this.expenseService.getLocalCategorie():this.expenseService.getExpenseCategories().subscribe(e=>{this.categories=e,this.expenseService.setCategorie(e)})}postExpense(e){this.notifi.presentLoading(),console.log(e.value),console.log(this.categorieId),console.log(this.storeId),console.log(this.reason);let t=e.value;t.storeId=this.storeId,t.reason=this.reason,t.categorieId=this.categorieId,this.expenseService.postExpense(t).subscribe(e=>{console.log(e),this.formulaire.reset(),this.notifi.dismissLoading(),this.notifi.presentToast("enregistr\xe9 avec success !","success")},e=>{if(this.notifi.dismissLoading(),e.error&&e.error.message){let t=this.userStore.find(e=>e.id==this.storeId);this.notifi.presentToast(`${t.name} ${e.error.message}`,"danger")}})}chooseCategorie(e){console.log(e),console.log(e.target.value),this.categorieId=e.target.value;let t=this.categories.filter(e=>e._id===this.categorieId)[0];console.log(t),this.reason=t.name}assignStore(e){return(0,a.mG)(this,void 0,void 0,function*(){console.log(e.target.value),this.storeId=e.target.value})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.$),c.Y36(g.g),c.Y36(u.i))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-add-expense"]],viewQuery:function(e,t){if(1&e&&c.Gf(d,1,s.F),2&e){let e;c.iGM(e=c.CRH())&&(t.formulaire=e.first)}},decls:24,vars:8,consts:[["slot","start"],["defaultHref","/home-expense"],[3,"ngSubmit"],["form","ngForm"],["interface","popover",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["name","amount","type","number","placeholder","montant","ngModel","","required",""],[4,"ngIf"],["name","description","ngModel","","required","","rows","8","cols","24","placeholder","\xe9crire le texte ici..."],[1,"ion-text-center"],["color","danger","size","large","type","submit","expand","block"],[3,"value"],["cancelText","cancel","okText","Okay","interface","popover",3,"ionChange"]],template:function(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c._UZ(2,"ion-title"),c.TgZ(3,"ion-buttons",0),c._UZ(4,"ion-back-button",1),c.qZA(),c.qZA(),c.qZA(),c.TgZ(5,"ion-content"),c.TgZ(6,"form",2,3),c.NdJ("ngSubmit",function(){c.CHM(e);const o=c.MAs(7);return t.postExpense(o)}),c.TgZ(8,"div"),c.TgZ(9,"ion-item"),c.TgZ(10,"ion-label"),c._uU(11),c.ALo(12,"translate"),c.qZA(),c.TgZ(13,"ion-select",4),c.NdJ("ionChange",function(e){return t.chooseCategorie(e)}),c.YNc(14,h,2,2,"ion-select-option",5),c.qZA(),c.qZA(),c.TgZ(15,"ion-item"),c._UZ(16,"ion-input",6),c.qZA(),c.YNc(17,m,6,4,"ion-item",7),c.TgZ(18,"ion-item"),c._UZ(19,"ion-textarea",8),c.qZA(),c.qZA(),c.TgZ(20,"div",9),c.TgZ(21,"ion-button",10),c._uU(22),c.ALo(23,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}2&e&&(c.xp6(11),c.Oqu(c.lcZ(12,4,"MENU.categories")),c.xp6(3),c.Q6J("ngForOf",t.categories),c.xp6(3),c.Q6J("ngIf",t.userStore.length>1),c.xp6(5),c.Oqu(c.lcZ(23,6,"MENU.save")))},directives:[n.Gu,n.sr,n.wd,n.Sm,n.oU,n.cs,n.W2,s.Y7,s.JL,s.F,n.Ie,n.Q$,n.t9,n.QI,i.sg,n.pK,n.as,s.JJ,s.On,s.Q7,i.O5,n.g2,n.j9,n.YG,n.n0],pipes:[p.X$],styles:[""]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[r.Bz.forChild(Z)],r.Bz]}),e})(),x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[i.ez,s.u5,n.Pc,v,p.aw.forChild()]]}),e})()}}]);