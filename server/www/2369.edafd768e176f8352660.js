(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[2369],{9532:(t,e,n)=>{"use strict";n.r(e),n.d(e,{InventaireListPageModule:()=>N});var o=n(1511),i=n(6073),r=n(8158),s=n(8777),l=n(4762),c=n(1572),a=n(5946),d=n(5511),g=n(4144),u=n(2874),h=n(8698),m=n(2487),Z=n(1044),f=n(4375),v=n(1064);function p(t,e){1&t&&c._UZ(0,"ion-back-button",10)}function y(t,e){1&t&&c._UZ(0,"ion-back-button",11)}function A(t,e){1&t&&(c.TgZ(0,"ion-buttons",1),c.TgZ(1,"ion-button",12),c._uU(2," Back "),c.qZA(),c.qZA())}function T(t,e){if(1&t&&(c.TgZ(0,"ion-col",27),c.TgZ(1,"pre"),c._uU(2),c.qZA(),c.qZA()),2&t){const t=c.oxw(2);c.xp6(2),c.lnq("",t.model.day,"/",t.model.month,"/",t.model.year,"")}}function q(t,e){if(1&t&&(c.TgZ(0,"ion-col",27),c.TgZ(1,"pre"),c._uU(2),c.qZA(),c.qZA()),2&t){const t=c.oxw(2);c.xp6(2),c.lnq("",t.model2.day,"/",t.model2.month,"/",t.model2.year,"")}}function S(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-col",28),c.TgZ(1,"div",29),c.TgZ(2,"ion-button",30),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).takeInventory()}),c._uU(3," submit"),c.qZA(),c.qZA(),c.qZA()}}const b=function(){return{padding:"15px"}};function I(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"ion-row"),c.TgZ(2,"ion-col",14),c.TgZ(3,"form",15),c.TgZ(4,"div",16),c.TgZ(5,"div",17),c.TgZ(6,"input",18,19),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().model=e}),c.qZA(),c.TgZ(8,"div",20),c.TgZ(9,"ion-button",21),c.NdJ("click",function(){return c.CHM(t),c.MAs(7).toggle()}),c._uU(10,"start "),c._UZ(11,"ion-icon",22),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(12,T,3,3,"ion-col",23),c.YNc(13,q,3,3,"ion-col",23),c.TgZ(14,"ion-col",14),c.TgZ(15,"form",15),c.TgZ(16,"div",16),c.TgZ(17,"div",17),c.TgZ(18,"input",18,24),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().model2=e}),c.qZA(),c.TgZ(20,"div",20),c.TgZ(21,"ion-button",21),c.NdJ("click",function(){return c.CHM(t),c.MAs(19).toggle()}),c._uU(22,"End "),c._UZ(23,"ion-icon",22),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(24,"ion-row",25),c.YNc(25,S,4,0,"ion-col",26),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.Q6J("ngStyle",c.DdM(6,b)),c.xp6(6),c.Q6J("ngModel",t.model),c.xp6(6),c.Q6J("ngIf",t.model),c.xp6(1),c.Q6J("ngIf",t.model2),c.xp6(5),c.Q6J("ngModel",t.model2),c.xp6(7),c.Q6J("ngIf",t.model&&t.model2)}}function x(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-row"),c.TgZ(1,"ion-col",38),c.TgZ(2,"div",40),c._uU(3),c.ALo(4,"date"),c.qZA(),c.qZA(),c.TgZ(5,"ion-col",38),c.TgZ(6,"div",40),c.TgZ(7,"ion-button",41),c.NdJ("click",function(){c.CHM(t);const n=e.$implicit;return c.oxw(4).displayInventory(n)}),c._uU(8,"voir"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(3),c.hij(" ",c.xi3(4,1,t.created,"medium")," ")}}function k(t,e){if(1&t&&(c.TgZ(0,"ion-slide"),c.TgZ(1,"ion-grid"),c.TgZ(2,"ion-row"),c.TgZ(3,"ion-col"),c.TgZ(4,"div",36),c.TgZ(5,"h4"),c._uU(6),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"ion-row",37),c.TgZ(8,"ion-col",38),c.TgZ(9,"div",36),c._uU(10,"jour"),c.qZA(),c.qZA(),c.TgZ(11,"ion-col",38),c.TgZ(12,"div",36),c._uU(13,"action"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(14,"div",39),c.YNc(15,x,9,4,"ion-row",35),c.qZA(),c.qZA(),c.qZA()),2&t){const t=e.$implicit;c.xp6(6),c.hij(" ",t.storeName?t.storeName:"no name"," "),c.xp6(9),c.Q6J("ngForOf",t)}}function w(t,e){if(1&t&&(c.TgZ(0,"div",33),c.TgZ(1,"ion-slides",34),c.YNc(2,k,16,2,"ion-slide",35),c.qZA(),c.qZA()),2&t){const t=c.oxw(2);c.xp6(2),c.Q6J("ngForOf",t.multiStoreInventory)}}function _(t,e){if(1&t&&(c.TgZ(0,"div",31),c.YNc(1,w,3,1,"div",32),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",!t.invoices)}}const C=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i,r,s,l,c,a,d){this.adminService=t,this.calendar=e,this.restApiService=n,this.loadingController=o,this.router=i,this.notif=r,this.inventoryService=s,this.alertController=l,this.managerService=c,this.rangeByStoreService=a,this.saveRandom=d,this.total_amount=0,this.total_glace=0,this.total_nonglace=0,this.total_ristourne=0,this.total_quantity=0,this.isLoading=!1,this.totalBu=0,this.totalBenefice=0,this.vendorRole=!1,this.onvarevenirdessus=!1,JSON.parse(localStorage.getItem("user"))[0]&&JSON.parse(localStorage.getItem("user"))[0].venderRole&&(this.vendorRole=JSON.parse(localStorage.getItem("user"))[0].venderRole),this.model=this.calendar.getToday(),this.model2=this.calendar.getToday(),this.getInventory()}getSetting(){let t=JSON.parse(localStorage.getItem("setting"));console.log(t),t.length?this.manageStockWithService=t[0].manageStockWithService:t.manageStockWithService&&(this.manageStockWithService=t.manageStockWithService)}ngOnInit(){}ionViewWillEnter(){this.getInventory()}takeInventory(){let t,e,n;if(n=`${this.model.year.toString()}`,this.model.day.toString(),t=`${this.model.day+1}`,this.model.month.toString(),e=`${this.model.month}`,new Date(this.model.year,this.model.month,this.model.day).getTime()>new Date(this.model2.year,this.model2.month,this.model2.day).getTime())console.log("impossible"),this.notif.presentError("Sorry, the start date must be less than the end date","danger");else{let t={};t.openDate=new Date(this.model.year,this.model.month-1,this.model.day).toISOString(),t.closeDate=new Date(this.model2.year,this.model2.month-1,this.model2.day).toISOString(),this.makeInventory(t)}}getInventory(){this.managerService.getInventory().subscribe(t=>(0,l.mG)(this,void 0,void 0,function*(){1==t.length&&0==t[0].Inventory.length||(this.multiStoreInventory=yield this.rangeByStoreService.rangeProductByStore(t),console.log(this.multiStoreInventory))}))}presentLoading2(){return(0,l.mG)(this,void 0,void 0,function*(){return this.isLoading=!0,yield this.loadingController.create({duration:6e4}).then(t=>{t.present().then(()=>{this.isLoading||t.dismiss().then()})})})}dismissLoading(){return(0,l.mG)(this,void 0,void 0,function*(){return this.isLoading=!1,yield this.loadingController.dismiss().then()})}makeInventory(t){this.presentLoading2(),this.restApiService.getProductItemForInventory(t).subscribe(t=>{console.log(t),this.inventoryService.setInventoryList(t),this.router.navigateByUrl("build-display-inventory"),this.dismissLoading().then(t=>{}).catch(t=>console.log(t))})}buildInventory(){let t=this.saveRandom.getSetting();console.log(t),this.router.navigateByUrl("before-inventory")}displayInventory(t){this.inventoryService.setInventoryList(t.Inventory),this.inventoryService.setCash(t.cashClose),this.router.navigateByUrl("build-display-inventory")}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(a.l),c.Y36(d.vL),c.Y36(g.e),c.Y36(r.HT),c.Y36(s.F0),c.Y36(u.g),c.Y36(h.V),c.Y36(r.Br),c.Y36(m.a),c.Y36(Z.n),c.Y36(f.i))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-inventaire-list"]],decls:15,vars:8,consts:[[1,"titre"],["slot","start"],["defaultHref","/start",4,"ngIf"],["defaultHref","/vendor-start",4,"ngIf"],["slot","start",4,"ngIf"],["slot","end"],["color","danger","fill","clear",1,"round",3,"click"],[1,"btnmenu"],[3,"ngStyle",4,"ngIf"],["class","slide1",4,"ngIf"],["defaultHref","/start"],["defaultHref","/vendor-start"],["fill","clear","color","primary"],[3,"ngStyle"],["size","3"],[1,"form-inline"],[1,"form-group"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",2,"display","none",3,"ngModel","ngModelChange"],["d","ngbDatepicker"],[1,"input-group-append"],["fill","clear","size","small","type","button",1,"btn","btn-outline-secondary","calendar",3,"click"],["name","calendar"],["size","3","class","ion-padding ion-align-self-center",4,"ngIf"],["d2","ngbDatepicker"],[1,"ion-align-items-center"],["class","ion-align-self-center",4,"ngIf"],["size","3",1,"ion-padding","ion-align-self-center"],[1,"ion-align-self-center"],[1,"ion-text-center"],["size","small",3,"click"],[1,"slide1"],["class","slide2",4,"ngIf"],[1,"slide2"],["pager","true"],[4,"ngFor","ngForOf"],[1,"ion-text-center","ion-text-uppercase"],[1,"header-row"],["size","6",1,"ion-align-self-center"],[1,"nodejs"],[1,"ion-text-center","inte"],["fill","outline","size","small",3,"click"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c._UZ(2,"ion-title",0),c.TgZ(3,"ion-buttons",1),c.YNc(4,p,1,0,"ion-back-button",2),c.YNc(5,y,1,0,"ion-back-button",3),c.qZA(),c.YNc(6,A,3,0,"ion-buttons",4),c.TgZ(7,"ion-buttons",5),c.TgZ(8,"ion-button",6),c.NdJ("click",function(){return e.buildInventory()}),c.TgZ(9,"div",7),c._uU(10),c.ALo(11,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"ion-content"),c.YNc(13,I,26,7,"div",8),c.YNc(14,_,2,1,"div",9),c.qZA()),2&t&&(c.xp6(4),c.Q6J("ngIf",!e.vendorRole&&!e.invoices),c.xp6(1),c.Q6J("ngIf",e.vendorRole&&!e.invoices),c.xp6(1),c.Q6J("ngIf",e.invoices),c.xp6(4),c.Oqu(c.lcZ(11,6,"MENU.Inventory")),c.xp6(3),c.Q6J("ngIf",e.onvarevenirdessus),c.xp6(1),c.Q6J("ngIf",!e.invoices))},directives:[r.Gu,r.sr,r.wd,r.Sm,o.O5,r.YG,r.W2,r.oU,r.cs,o.PC,r.Nd,r.wI,i.Y7,i.JL,i.F,d.J4,i.Fj,i.JJ,i.On,r.gu,r.Hr,o.sg,r.A$,r.jY],pipes:[v.X$,o.uU],styles:[".userName[_ngcontent-%COMP%]{font-size:11px;position:absolute;left:80%;bottom:8%;color:#fa3434}.tableNumber[_ngcontent-%COMP%]{font-size:2px;position:absolute;left:50%;bottom:40%}ion-col[_ngcontent-%COMP%]   .inte[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:9px}.data-lastrow[_ngcontent-%COMP%]{background-color:#f1f1f1;padding-top:10px;padding-bottom:10px}.found[_ngcontent-%COMP%]{background-color:#16acf1;height:100%;width:100%;display:block}.header-row[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:9px}.icone[_ngcontent-%COMP%]{font-size:30px}"]}),t})()}];let J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[s.Bz.forChild(C)],s.Bz]}),t})(),N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.ez,i.u5,r.Pc,J,d.IJ,v.aw.forChild()]]}),t})()},1044:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var o=n(4762),i=n(1572),r=n(9719);let s=(()=>{class t{constructor(t){this.getStoreName=t}rangeProductByStore(t){return new Promise((e,n)=>{let i=t.reduce((t,e)=>(t[e.storeId]=[...t[e.storeId]||[],e],t),{}),r=[];for(const t in i)r.push(i[t]);r.forEach(t=>(0,o.mG)(this,void 0,void 0,function*(){let e=yield this.getStoreName.takeName(t);t.storeName=e})),e(r)})}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(r.$))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);