(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[415],{415:(t,o,i)=>{"use strict";i.r(o),i.d(o,{AdminProductsPageModule:()=>A});var e=i(1511),n=i(6073),r=i(8777),c=i(8158),s=i(4762),d=i(3690),u=i(1344),l=i.n(u),a=i(1572),g=i(4144),p=i(2968);function m(t,o){if(1&t){const t=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"ion-item"),a.TgZ(2,"ion-avatar",0),a.TgZ(3,"ion-img",5),a.NdJ("ionError",function(){a.CHM(t);const i=o.$implicit;return a.oxw(2).noImageLoad(i)})("click",function(){a.CHM(t);const i=o.$implicit;return a.oxw(2).loading(i)}),a.qZA(),a.qZA(),a.TgZ(4,"ion-label"),a.TgZ(5,"p",6),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"ion-button",7),a.NdJ("click",function(){a.CHM(t);const i=o.$implicit,e=o.index;return a.oxw(2).updateProduct(i,e)}),a._uU(8,"Update"),a.qZA(),a.TgZ(9,"ion-button",8),a.NdJ("click",function(){a.CHM(t);const i=o.$implicit;return a.oxw(2).deleteProduct(i)}),a._UZ(10,"ion-icon",9),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=o.$implicit;a.xp6(3),a.Q6J("src",t.url),a.xp6(3),a.Oqu(t.name)}}function Z(t,o){if(1&t&&(a.TgZ(0,"ion-list"),a.YNc(1,m,11,2,"div",4),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.products)}}let h=(()=>{class t{constructor(t,o,i,e){this.router=t,this.restApi=o,this.modalController=i,this.urlService=e}ngOnInit(){this.takeUrl(),this.takeMaeriProducts()}addProduct(){this.router.navigateByUrl("admin-products-add")}addCategorie(){this.router.navigateByUrl("admin-products-categorie")}addMadeBy(){this.router.navigateByUrl("admin-products-madeby")}takeMaeriProducts(){this.restApi.getMaeriProductAdmin().subscribe(t=>{console.log(t),this.products=t.message})}updateProduct(t,o){return(0,s.mG)(this,void 0,void 0,function*(){console.log(o);const i=yield this.modalController.create({component:d.U,componentProps:{products:t}});return i.onDidDismiss().then(t=>{this.products.splice(o,1,t.data),console.log(t.data)}),yield i.present()})}deleteProduct(t){this.restApi.deleteMaeriProduct(t._id).subscribe(t=>{console.log(t),this.takeMaeriProducts()})}takeUrl(){this.urlService.getUrl().subscribe(t=>{this.url=t,console.log(this.url),this.productIncoming()})}productIncoming(){this.sockets=l()(this.url),this.sockets.on("maerinewproduct",t=>{console.log(t),t.prod.url=t.url,this.products.unshift(t.prod)})}displayImg(t){return console.log("loading..."),t.url}loading(t){console.log("loading...2",t);let o=t.url;t.url="",setTimeout(()=>{console.log(o),t.url=o},5e3)}noImageLoad(t){console.log("loading...error",t)}}return t.\u0275fac=function(o){return new(o||t)(a.Y36(r.F0),a.Y36(g.e),a.Y36(c.IN),a.Y36(p.i))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-admin-products"]],decls:14,vars:1,consts:[["slot","start"],["defaultHref","/admin-page"],[3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"src","ionError","click"],[1,"packName"],[1,"divBtnUpdate",3,"click"],["color","danger",1,"divBtnDelete",3,"click"],["slot","icon-only","name","trash"]],template:function(t,o){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a._UZ(3,"ion-back-button",1),a.qZA(),a.TgZ(4,"ion-title"),a._uU(5,"products"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"ion-content"),a.TgZ(7,"ion-button",2),a.NdJ("click",function(){return o.addCategorie()}),a._uU(8,"add categorie"),a.qZA(),a.TgZ(9,"ion-button",2),a.NdJ("click",function(){return o.addProduct()}),a._uU(10,"add product"),a.qZA(),a.TgZ(11,"ion-button",2),a.NdJ("click",function(){return o.addMadeBy()}),a._uU(12,"add made by"),a.qZA(),a.YNc(13,Z,2,1,"ion-list",3),a.qZA()),2&t&&(a.xp6(13),a.Q6J("ngIf",o.products))},directives:[c.Gu,c.sr,c.Sm,c.oU,c.cs,c.wd,c.W2,c.YG,e.O5,c.q_,e.sg,c.Ie,c.BJ,c.Xz,c.Q$,c.gu],styles:[""]}),t})();var f=i(9547);const k=[{path:"",component:h}];let A=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[e.ez,n.u5,c.Pc,r.Bz.forChild(k),f.G]]}),t})()}}]);