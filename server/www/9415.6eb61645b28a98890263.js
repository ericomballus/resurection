(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[9415],{9415:(n,e,o)=>{"use strict";o.r(e),o.d(e,{VendorModalPageModule:()=>S});var t=o(1511),r=o(6073),i=o(8158),c=o(8777),s=o(4762),d=o(1886),a=o(9764),l=o(8289),g=o(9996),u=o(1572),f=o(3400),p=o(2874),m=o(5946),h=o(5604),v=o(4144);function b(n,e){1&n&&(u.TgZ(0,"ion-buttons",6),u._UZ(1,"ion-back-button",7),u.qZA())}function C(n,e){1&n&&(u.TgZ(0,"ion-buttons",6),u._UZ(1,"ion-back-button",8),u.qZA())}function x(n,e){if(1&n&&(u.TgZ(0,"ion-label"),u._uU(1),u.ALo(2,"date"),u.ALo(3,"date"),u.qZA()),2&n){const n=u.oxw(2);u.xp6(1),u.AsE("date de livraison : ",u.lcZ(2,2,n.order.dateLivraison)," a ",u.xi3(3,4,n.order.dateLivraison,"shortTime")," ")}}function M(n,e){1&n&&(u.TgZ(0,"ion-label"),u._uU(1,"heure de livraison : "),u.qZA())}function O(n,e){if(1&n){const n=u.EpF();u.TgZ(0,"ion-datetime",12),u.NdJ("ionChange",function(e){return u.CHM(n),u.oxw(2).getLivraisonTime(e)}),u.qZA()}if(2&n){const n=u.oxw(2);u.Q6J("value",n.order.dateLivraison)}}function _(n,e){if(1&n){const n=u.EpF();u.TgZ(0,"ion-button",13),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).updateLivraisonHours()}),u._uU(1," modifier "),u.qZA()}}function P(n,e){if(1&n){const n=u.EpF();u.TgZ(0,"ion-button",14),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).confirmHours()}),u._uU(1," confirm "),u.qZA()}}function Z(n,e){if(1&n&&(u.TgZ(0,"ion-item"),u.YNc(1,x,4,7,"ion-label",1),u.YNc(2,M,2,0,"ion-label",1),u.YNc(3,O,1,1,"ion-datetime",9),u.YNc(4,_,2,0,"ion-button",10),u.YNc(5,P,2,0,"ion-button",11),u.qZA()),2&n){const n=u.oxw();u.xp6(1),u.Q6J("ngIf",1==n.order.livraisonDateConfirm),u.xp6(1),u.Q6J("ngIf",0==n.order.livraisonDateConfirm),u.xp6(1),u.Q6J("ngIf",0==n.order.livraisonDateConfirm),u.xp6(1),u.Q6J("ngIf",0==n.order.livraisonDateConfirm),u.xp6(1),u.Q6J("ngIf",0==n.order.livraisonDateConfirm)}}function T(n,e){if(1&n&&(u.TgZ(0,"div",4),u._uU(1),u.ALo(2,"currency"),u.qZA()),2&n){const n=u.oxw().$implicit;u.xp6(1),u.hij(" ",u.gM2(2,1,n.item.packPrice,"CFA","symbol","3.0-0")," ")}}function k(n,e){if(1&n&&(u.TgZ(0,"ion-row",15),u.TgZ(1,"ion-col",3),u.TgZ(2,"div",4),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"ion-col",3),u.YNc(5,T,3,6,"div",16),u.qZA(),u.TgZ(6,"ion-col",3),u.TgZ(7,"div",4),u._uU(8),u.qZA(),u.qZA(),u.TgZ(9,"ion-col",3),u.TgZ(10,"div",4),u._uU(11),u.ALo(12,"currency"),u.qZA(),u.qZA(),u.qZA()),2&n){const n=e.$implicit;u.xp6(3),u.Oqu(n.item.name),u.xp6(2),u.Q6J("ngIf",n.item.packPrice),u.xp6(3),u.Oqu(n.qty),u.xp6(3),u.hij(" ",u.gM2(12,4,n.coast,"CFA","symbol","3.0-0")," ")}}function w(n,e){if(1&n){const n=u.EpF();u.TgZ(0,"ion-button",23),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).confirmOrderReception()}),u._uU(1," confirm "),u.qZA()}}function q(n,e){if(1&n){const n=u.EpF();u.TgZ(0,"ion-button",23),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).confirmOrder()}),u._uU(1," valider "),u.qZA()}}function A(n,e){if(1&n){const n=u.EpF();u.TgZ(0,"ion-button",24),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).vendorDelivreddOrder()}),u._uU(1," livrer "),u.qZA()}}function I(n,e){if(1&n){const n=u.EpF();u.TgZ(0,"ion-button",25),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).cancelOrder()}),u._uU(1," annuler "),u.qZA()}}function y(n,e){if(1&n){const n=u.EpF();u.TgZ(0,"ion-button",26),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).buyOrder()}),u._uU(1," buy "),u.qZA()}}function Y(n,e){if(1&n&&(u.TgZ(0,"ion-row"),u.TgZ(1,"ion-col",17),u.TgZ(2,"div",18),u.YNc(3,w,2,0,"ion-button",19),u.YNc(4,q,2,0,"ion-button",19),u.YNc(5,A,2,0,"ion-button",20),u.YNc(6,I,2,0,"ion-button",21),u.YNc(7,y,2,0,"ion-button",22),u.qZA(),u.qZA(),u.qZA()),2&n){const n=u.oxw();u.xp6(3),u.Q6J("ngIf",!n.order.vendorConfirm&&!n.order.delivered&&!n.order.orderConfirm&&0!=n.order.status),u.xp6(1),u.Q6J("ngIf",!n.order.vendorConfirm&&n.order.orderConfirm&&!n.order.delivered&&0!=n.order.status||n.order.paid&&!n.order.delivered&&!n.order.vendorConfirm),u.xp6(1),u.Q6J("ngIf",n.order.vendorConfirm&&2==n.order.status&&n.order.catchVendor),u.xp6(1),u.Q6J("ngIf",n.order.vendorConfirm&&!n.order.delivered&&!n.order.paid||!n.order.vendorConfirm&&!n.order.delivered&&0!=n.order.status||n.order.status),u.xp6(1),u.Q6J("ngIf",!n.order.paid)}}function z(n,e){if(1&n){const n=u.EpF();u.TgZ(0,"ion-button",23),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).delivredOrder()}),u._uU(1," valider recepetion "),u.qZA()}}function U(n,e){if(1&n&&(u.TgZ(0,"ion-row"),u.TgZ(1,"ion-col",17),u.TgZ(2,"div",18),u.YNc(3,z,2,0,"ion-button",19),u.qZA(),u.qZA(),u.qZA()),2&n){const n=u.oxw();u.xp6(3),u.Q6J("ngIf",n.order.vendorConfirm&&!n.order.delivered)}}const J=[{path:"",component:(()=>{class n{constructor(n,e,o,t,r,i){this.vendorService=n,this.router=e,this.notif=o,this.adminService=t,this.countItemsService=r,this.restApiService=i,this.disable=!0,this.order=this.vendorService.getOrder(),console.log(this.order),"string"==typeof this.order.vendorId&&(this.order.catchVendor=!0)}ngOnInit(){}getLivraisonTime(n){this.date=new Date(n.target.value),this.disable=!this.disable}confirmOrder(){console.log(this.order),this.order.vendorConfirm=!0,this.order.status=2,this.date&&(this.order.dateLivraison=this.date,this.order.maxChanges=this.order.maxChanges+1),this.vendorService.confirmOrderReceive(this.order).subscribe(n=>{this.router.navigateByUrl("vendor-orders"),this.notif.presentToast("confirmation reception commande ok","success")})}confirmOrderReception(){this.order.orderConfirm=!0,this.vendorService.confirmOrderReceive(this.order).subscribe(n=>{this.sendTofirebase(this.order),this.router.navigateByUrl("vendor-orders"),this.notif.presentToast("confirmation reception commande ok","success")})}sendTofirebase(n){}cancelOrder(){this.order.vendorConfirm=!1,this.order.status=0,this.order.paid=!1,console.log(this.order),this.order.restorProduct=2,this.vendorService.cancelOrderReceive(this.order).subscribe(n=>{this.router.navigateByUrl("vendor-orders"),this.notif.presentToast("la commande a \xe9t\xe9 annul\xe9","danger")})}updateLivraisonHours(){this.date&&this.order.maxChanges<3?(this.order.dateLivraison=this.date,this.vendorService.updateOrderHourLivraison(this.order).subscribe(n=>{this.router.navigateByUrl("vendor-orders"),this.notif.presentToast("heure de livraison modifier","success")})):this.notif.presentToast("vous ne pouvez plus changer l'heure de livraison","danger")}confirmHours(){this.order.livraisonDateConfirm=1,this.vendorService.updateOrderHourLivraison(this.order).subscribe(n=>{this.notif.presentToast("heure de livraison confirm\xe9","success")})}vendorDelivreddOrder(){this.order.vendorConfirm=!0,this.order.status=3,this.vendorService.confirmOrderReceive(this.order).subscribe(n=>{this.router.navigateByUrl("vendor-orders"),this.notif.presentToast("arriv\xe9e a destination","success")})}delivredOrder(){this.order.delivered=!0,this.order.status=4,this.order.isBuy=1,console.log(this.order),this.vendorService.confirmOrderReceive(this.order).subscribe(n=>{console.log(n),this.addToStock(n.commandes),this.router.navigateByUrl("retailer-order"),this.notif.presentToast("reception de la commande confirm\xe9","success")})}buyOrder(){this.order.status=5,console.log(this.order),this.order.paid=!0,this.vendorService.confirmOrderReceive(this.order).subscribe(n=>{this.router.navigateByUrl("vendor-orders"),this.notif.presentToast("paiment de la commande confirm\xe9","success")})}addToStock(n){return(0,s.mG)(this,void 0,void 0,function*(){let e=0,o=0,t=[];t=n,console.log(t),t.forEach(n=>{n.qty&&(e+=n.qty),n.coast&&(o+=parseInt(n.coast))}),console.log(o);let r=[],i=[],c=[];for(let n=0;n<t.length;n++){let e={};console.log(t[n]),e=t[n].item.nbrBtl?{newquantity:t[n].qty+t[n].item.nbrBtl,id:t[n].item._id}:{newquantity:t[n].qty,id:t[n].item._id},t[n].item.productType&&"manufacturedItems"==t[n].item.productType&&c.push(e),t[n].item.productType?r.push(e):(console.log("pack here"),t[n].item.newquantity=t[n].qty,i.push(t[n]))}console.log(i),i.length&&(yield this.sendPackToServer(i,r)),c.length&&(yield this.sendProductRestoToServer(c));let s=yield{articles:n,quantity:e,totalPrice:o};this.adminService.sendPurchase(s).subscribe(n=>{console.log("end of all")})})}sendPackToServer(n,e){return new Promise((o,t)=>{this.countItemsService.countProductsItems(n).then(t=>{t.length&&this.restApiService.updateMorePackItem({tab:t,fromVendor:!0}).subscribe(r=>{t.forEach(n=>{console.log(n);let o={newquantity:parseInt(n.newquantity),id:n.productItemId,noRistourne:n.noRistourne,maeriId:n.maeriId};e.push(o)}),console.log(n),console.log(e),this.restApiService.updateMoreProductItem({tab:e,fromVendor:!0}).subscribe(n=>{o("ok")})})})})}sendProductRestoToServer(n){return new Promise((e,o)=>{console.log("send resto init---++++ ok");let t=0,r=n.length;n.length&&(0,d.$R)((0,a.D)(n),(0,l.F)(500)).pipe((0,g.U)(([n])=>n)).subscribe(n=>{console.log("send resto 2 ok"),this.EnvoiManufactured(n),t+=1,t>=r&&setTimeout(()=>{console.log("cest bon=======++++++++112222----"),e("ok")},200)})})}EnvoiManufactured(n){this.restApiService.updateManufacturedItem(n).subscribe(n=>{console.log(n)})}}return n.\u0275fac=function(e){return new(e||n)(u.Y36(f.A),u.Y36(c.F0),u.Y36(p.g),u.Y36(m.l),u.Y36(h.w),u.Y36(v.e))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-vendor-modal"]],decls:24,vars:6,consts:[["slot","start",4,"ngIf"],[4,"ngIf"],[1,"second-lastrow"],["size","3"],[1,"ion-text-center","inte"],["class","data-row data-update",4,"ngFor","ngForOf"],["slot","start"],["defaultHref","/vendor-orders"],["defaultHref","/retailer-order"],["displayFormat","MMM DD, YYYY HH:mm","pickerFormat","MMM DD, YYYY HH:mm",3,"value","ionChange",4,"ngIf"],["slot","end","size","small","fill","clear",3,"click",4,"ngIf"],["slot","end",3,"click",4,"ngIf"],["displayFormat","MMM DD, YYYY HH:mm","pickerFormat","MMM DD, YYYY HH:mm",3,"value","ionChange"],["slot","end","size","small","fill","clear",3,"click"],["slot","end",3,"click"],[1,"data-row","data-update"],["class","ion-text-center inte",4,"ngIf"],["size","12"],[1,"ion-text-center"],["size","small",3,"click",4,"ngIf"],["color","success","size","small",3,"click",4,"ngIf"],["color","danger","fill","clear","size","small",3,"click",4,"ngIf"],["color","success","fill","clear","size","small",3,"click",4,"ngIf"],["size","small",3,"click"],["color","success","size","small",3,"click"],["color","danger","fill","clear","size","small",3,"click"],["color","success","fill","clear","size","small",3,"click"]],template:function(n,e){1&n&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-title"),u._uU(3,"vendor-modal"),u.qZA(),u.YNc(4,b,2,0,"ion-buttons",0),u.YNc(5,C,2,0,"ion-buttons",0),u.qZA(),u.qZA(),u.TgZ(6,"ion-content"),u.YNc(7,Z,6,5,"ion-item",1),u.TgZ(8,"ion-row",2),u.TgZ(9,"ion-col",3),u.TgZ(10,"div",4),u._uU(11,"name"),u.qZA(),u.qZA(),u.TgZ(12,"ion-col",3),u.TgZ(13,"div",4),u._uU(14,"price"),u.qZA(),u.qZA(),u.TgZ(15,"ion-col",3),u.TgZ(16,"div",4),u._uU(17,"Qty"),u.qZA(),u.qZA(),u.TgZ(18,"ion-col",3),u.TgZ(19,"div",4),u._uU(20,"T.price"),u.qZA(),u.qZA(),u.qZA(),u.YNc(21,k,13,9,"ion-row",5),u.YNc(22,Y,8,5,"ion-row",1),u.YNc(23,U,4,1,"ion-row",1),u.qZA()),2&n&&(u.xp6(4),u.Q6J("ngIf",!e.order.adminId),u.xp6(1),u.Q6J("ngIf",e.order.adminId),u.xp6(2),u.Q6J("ngIf",e.order.catchVendor&&e.order.maxChanges>=0||!e.order.catchVendor&&e.order.maxChanges>0),u.xp6(14),u.Q6J("ngForOf",e.order.commandes),u.xp6(1),u.Q6J("ngIf",!e.order.adminId),u.xp6(1),u.Q6J("ngIf",e.order.adminId))},directives:[i.Gu,i.sr,i.wd,t.O5,i.W2,i.Nd,i.wI,t.sg,i.Sm,i.oU,i.cs,i.Ie,i.Q$,i.x4,i.QI,i.YG],pipes:[t.uU,t.H9],styles:["ion-toolbar[_ngcontent-%COMP%]{background:--ion-color-primary}.lesbtn[_ngcontent-%COMP%]{flex-wrap:wrap}.circle[_ngcontent-%COMP%], .lesbtn[_ngcontent-%COMP%]{display:flex}.circle1[_ngcontent-%COMP%]{text-align:center}.circle1[_ngcontent-%COMP%], .circle2[_ngcontent-%COMP%]{width:80%;height:80%}.circle-progress[_ngcontent-%COMP%]{font-size:25px;position:relative;top:25%}.lesbtn2[_ngcontent-%COMP%]{font-size:50%;text-transform:uppercase}.shopbtn[_ngcontent-%COMP%]{position:relative;left:8px}.col[_ngcontent-%COMP%]{align-self:center}ion-badge[_ngcontent-%COMP%]{color:#fff;position:absolute;top:0;right:0;border-radius:100%}.label[_ngcontent-%COMP%]{font-size:70%}.imgavatar[_ngcontent-%COMP%]{width:30px;height:30px}.category-block[_ngcontent-%COMP%]{margin-bottom:4px}.category-banner[_ngcontent-%COMP%]{border-left:8px solid var(--ion-color-secondary);background:var(--ion-color-light);height:40px;padding:10px;font-weight:500}.allChart[_ngcontent-%COMP%], .allChart2[_ngcontent-%COMP%], .allChart3[_ngcontent-%COMP%]{background-color:#000}.flex-container[_ngcontent-%COMP%]{display:flex;align-items:stretch;background-color:#f1f1f1}.flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100px;margin:10px;text-align:center;height:75px;font-size:10px;padding-top:10%;text-transform:uppercase}.flex-container[_ngcontent-%COMP%] > .div1[_ngcontent-%COMP%]{border:1px solid #f7ab1e}.flex-container[_ngcontent-%COMP%] > .div2[_ngcontent-%COMP%]{border:1px solid #1ef7f7}.flex-container[_ngcontent-%COMP%] > .div3[_ngcontent-%COMP%]{border:1px solid #6a1ef7}.flex-container[_ngcontent-%COMP%] > .div4[_ngcontent-%COMP%]{border:1px solid #f71ee5}.titleInDiv[_ngcontent-%COMP%]{text-align:center;font-size:7px;margin:0}.numberInDiv[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:15px}.numberIntable[_ngcontent-%COMP%]{border:none;padding:10px;font-size:10px}.numberIntable[_ngcontent-%COMP%], .textRight[_ngcontent-%COMP%]{text-align:right}.textLeft[_ngcontent-%COMP%]{text-align:left}.textCenter[_ngcontent-%COMP%]{text-align:center}.table[_ngcontent-%COMP%], .table1[_ngcontent-%COMP%]{border:none}.table[_ngcontent-%COMP%]{padding:0}.productname[_ngcontent-%COMP%]{text-align:left;border:none;padding:10px;font-size:10px;color:#269af8}.resume[_ngcontent-%COMP%]{margin-top:15%}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f1f1f1}th[_ngcontent-%COMP%]{border:none}.ionItem[_ngcontent-%COMP%]{width:100px;background-color:#000}div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:11px;font-weight:700}ion-col[_ngcontent-%COMP%]{border:1px solid #f1f1f1}.header-row[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:13px}.divResto[_ngcontent-%COMP%]{margin-top:100px}.alertStock[_ngcontent-%COMP%]{color:red;font-size:18px}.separationBlock[_ngcontent-%COMP%]{background-color:#494848;color:#fff;padding:15px;margin-top:15px}.desktop[_ngcontent-%COMP%]   ion-router-outlet[_ngcontent-%COMP%]{margin-top:56px;margin-bottom:56px}.desktop[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-height:40px}.desktop[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#374168}.desktop[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{--color:var(--ion-color-light)}.desktop[_ngcontent-%COMP%]   .active-link[_ngcontent-%COMP%]{--color:var(--ion-color-primary)}.footer[_ngcontent-%COMP%]{width:100%;color:#fff;font-weight:700;background:#374168;height:56px;line-height:56px;text-align:center;position:fixed;bottom:0}.btnfooter[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{color:#494848;font-size:11px}ion-button[_ngcontent-%COMP%]   .btnmenu[_ngcontent-%COMP%], ion-button[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center}ion-button[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:15px}.btnfooter2[_ngcontent-%COMP%]{color:#494848;font-weight:bolder}.btnfooter2[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]   .inte[_ngcontent-%COMP%]{font-size:11px}.second-lastrow[_ngcontent-%COMP%]{background-color:#ebbd40;padding-top:10px;padding-bottom:10px}.last-row[_ngcontent-%COMP%]{padding-top:1px;padding-bottom:1px}.lastBtn[_ngcontent-%COMP%]{background-color:#16f08a;padding-top:10px;padding-bottom:10px}ion-item[_ngcontent-%COMP%]{--padding-top:10px;--padding-bottom:10px;font-size:11px;font-weight:700}.contain[_ngcontent-%COMP%]{margin-top:10px}.ion-datetime[_ngcontent-%COMP%]{background-color:#f1f1f1}"]}),n})()}];let N=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[c.Bz.forChild(J)],c.Bz]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[t.ez,r.u5,i.Pc,N]]}),n})()}}]);