(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[5411],{5411:(e,n,t)=>{"use strict";t.r(n),t.d(n,{AdminDisplayCustumersPageModule:()=>P});var o=t(1511),i=t(6073),s=t(8158),c=t(8777),r=t(4762),l=t(8959),u=t(6755),a=t(2730),d=t(1572),g=t(5946),p=t(4892),m=t(4375);let Z=(()=>{class e{transform(e){if(e.userConnection){let n=new Date(e.userConnection.lastConnection).getTime();return(new Date).getTime()-n<5e5}return null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=d.Yjl({name:"online",type:e,pure:!0}),e})();function f(e,n){1&e&&(d.TgZ(0,"div",21),d._uU(1," disable "),d.qZA())}function h(e,n){1&e&&(d.TgZ(0,"div",22),d._uU(1," enable "),d.qZA())}function x(e,n){1&e&&(d.TgZ(0,"div",23),d._uU(1,"vendor"),d.qZA())}function C(e,n){1&e&&(d.TgZ(0,"div",23),d._uU(1,"retailer"),d.qZA())}function A(e,n){1&e&&(d.TgZ(0,"div",24),d._uU(1," on "),d.qZA())}function v(e,n){1&e&&(d.TgZ(0,"div",25),d._uU(1," off "),d.qZA())}const q=function(e){return{"background-color":e}};function T(e,n){if(1&e){const e=d.EpF();d.TgZ(0,"ion-row",14),d.NdJ("click",function(){d.CHM(e);const t=n.$implicit;return d.oxw().presentActionSheet(t)}),d.TgZ(1,"ion-col",7),d.TgZ(2,"div",15),d._uU(3),d.qZA(),d.qZA(),d.TgZ(4,"ion-col",7),d.YNc(5,f,2,0,"div",16),d.YNc(6,h,2,0,"div",17),d.qZA(),d.TgZ(7,"ion-col",7),d.TgZ(8,"div",15),d.YNc(9,x,2,0,"div",18),d.YNc(10,C,2,0,"div",18),d.qZA(),d.qZA(),d.TgZ(11,"ion-col",7),d.YNc(12,A,2,0,"div",19),d.ALo(13,"online"),d.YNc(14,v,2,0,"div",20),d.ALo(15,"online"),d.qZA(),d.TgZ(16,"ion-col",9),d.TgZ(17,"div",8),d._uU(18),d.qZA(),d.qZA(),d.TgZ(19,"ion-col",9),d.TgZ(20,"div",8),d._uU(21),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=n.$implicit;d.Q6J("ngStyle",d.VKq(14,q,n.index%2==0?"#f1f1f1":"white")),d.xp6(3),d.hij(" ",e.firstName," "),d.xp6(2),d.Q6J("ngIf",!1===e.autorization),d.xp6(1),d.Q6J("ngIf",!0===e.autorization),d.xp6(3),d.Q6J("ngIf",e.venderRole),d.xp6(1),d.Q6J("ngIf",!e.venderRole),d.xp6(2),d.Q6J("ngIf",d.lcZ(13,10,e)),d.xp6(2),d.Q6J("ngIf",!d.lcZ(15,12,e)),d.xp6(4),d.Oqu(e.telephone),d.xp6(3),d.hij(" ",e.storeId?e.storeId.length:1," ")}}function _(e,n){if(1&e&&(d.TgZ(0,"div",28),d._uU(1),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(1),d.hij(" ",e.lastRequest?e.lastRequest:""," ")}}function b(e,n){if(1&e&&(d.TgZ(0,"div",29),d._uU(1),d.ALo(2,"date"),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(1),d.hij(" ",d.xi3(2,1,e.userConnection.lastConnection?e.userConnection.lastConnection:"0000","medium")," ")}}function w(e,n){if(1&e){const e=d.EpF();d.TgZ(0,"ion-row",14),d.NdJ("click",function(){d.CHM(e);const t=n.$implicit;return d.oxw().presentActionSheet(t)}),d.TgZ(1,"ion-col",12),d.TgZ(2,"div",15),d._uU(3),d.qZA(),d.qZA(),d.TgZ(4,"ion-col",12),d.TgZ(5,"div",24),d._uU(6," online "),d.qZA(),d.qZA(),d.TgZ(7,"ion-col",13),d.YNc(8,_,2,1,"div",26),d.qZA(),d.TgZ(9,"ion-col",12),d.YNc(10,b,3,4,"div",27),d.qZA(),d.qZA()}if(2&e){const e=n.$implicit;d.Q6J("ngStyle",d.VKq(4,q,n.index%2==0?"#f1f1f1":"white")),d.xp6(3),d.hij(" ",e.firstName," "),d.xp6(5),d.Q6J("ngIf",e.lastRequest),d.xp6(2),d.Q6J("ngIf",e.userConnection&&e.userConnection.lastConnection)}}const S=[{path:"",component:(()=>{class e{constructor(e,n,t,o,i,s,c){this.adminService=e,this.modalController=n,this.socket=t,this.router=o,this.alertController=i,this.actionSheetController=s,this.randomStorage=c,this.custumers=[],this.custumersConnect=[],this.tab=[],this.admin_action=!1,this.getCustomers(),this.adminId=localStorage.getItem("adminId"),this.webServerSocket(this.adminId)}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){})}ionViewWillEnter(){this.getCustomers()}getCustomers(){this.adminService.getUser().subscribe(e=>{console.log(e),this.custumers=[],this.custumers=e.users,this.custumersConnect=e.users})}updateCustomer(e){return(0,r.mG)(this,void 0,void 0,function*(){this.admin_action=!0;const n=yield this.modalController.create({component:l.N,componentProps:{custumer:e}});return n.onDidDismiss().then(e=>{console.log(e)}),yield n.present()})}monitoringCustomer(e){return(0,r.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:u.B,componentProps:{custumer:e}});return n.onDidDismiss().then(e=>{console.log(e)}),yield n.present()})}webServerSocket(e){console.log("hello hello"),this.socket.connect(),this.socket.emit("set-name",name),this.socket.fromEvent("custumerupdate").subscribe(e=>{let n=this.custumers.findIndex(n=>n._id===e._id);console.log(n),n>=0&&this.custumers.splice(n,1,e)}),this.socket.fromEvent("newUser").subscribe(e=>{console.log(e),this.custumers.push(e)}),this.socket.fromEvent("incomingRequest").subscribe(e=>{let n=this.custumersConnect.findIndex(n=>n._id===e._id);console.log(n),n>=0?this.custumersConnect.splice(n,1,e):this.custumersConnect.push(e);let t=this.custumers.findIndex(n=>n._id===e._id);t>=0&&this.custumers.splice(t,1,e)})}addCustomer(){this.router.navigateByUrl("register")}displayDatabase(){this.adminService.customersDB(this.adminId).subscribe(e=>{console.log(e)})}goDatabase(e){return(0,r.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:a.E,componentProps:{db:e}});return n.onDidDismiss().then(e=>{console.log(e)}),yield n.present()})}goToProducts(){this.router.navigateByUrl("admin-products")}presentActionSheet(e){return(0,r.mG)(this,void 0,void 0,function*(){const n=yield this.actionSheetController.create({header:"Albums",buttons:[{text:"Update",role:"destructive",icon:"contact",handler:()=>{this.updateCustomer(e)}},{text:"Monitoring",icon:"share",handler:()=>{this.monitoringCustomer(e)}},{text:"Contrat",icon:"arrow-dropright-circle",handler:()=>{console.log(e),this.randomStorage.setUserAdmin(e),this.router.navigateByUrl("user-contrat")}},{text:"Delete",icon:"trash-outline",handler:()=>{this.presentAlertConfirm(e)}},{text:"Cancel",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield n.present()})}presentAlertConfirm(e){return(0,r.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({cssClass:"my-custom-class",message:"Delete user?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:e=>{console.log("Confirm Cancel: blah")}},{text:"Ok",handler:()=>{e.delete=!0,this.removeUser(e)}}]});yield n.present()})}removeUser(e){this.adminService.deleteCustomer(e).subscribe(e=>{console.log(e),this.getCustomers()})}}return e.\u0275fac=function(n){return new(n||e)(d.Y36(g.l),d.Y36(s.IN),d.Y36(p.sk),d.Y36(c.F0),d.Y36(s.Br),d.Y36(s.BX),d.Y36(m.i))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-admin-display-custumers"]],decls:52,vars:2,consts:[["slot","start"],["defaultHref","/admin-page"],["slot","end"],[3,"click"],["slot","icon-only","name","add-circle-outline"],[1,"ion-text-center","ion-text-uppercase"],[1,"header-row"],["size-sm","3","size-md","3","size-lg","2"],[1,"ion-text-center"],["size-lg","2",1,"ion-hide-lg-down"],["class","data-row data-update",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"userconnect"],["size","2"],["size","6"],[1,"data-row","data-update",3,"ngStyle","click"],[1,"ion-text-center","ion-text-uppercase","smallSize"],["class","ion-text-center ion-text-uppercase smallSize disable",4,"ngIf"],["class","ion-text-center ion-text-uppercase smallSize enable",4,"ngIf"],["slot","end","color","light",4,"ngIf"],["class","ion-text-center ion-text-uppercase smallSize online",4,"ngIf"],["class","ion-text-center ion-text-uppercase smallSize offline",4,"ngIf"],[1,"ion-text-center","ion-text-uppercase","smallSize","disable"],[1,"ion-text-center","ion-text-uppercase","smallSize","enable"],["slot","end","color","light"],[1,"ion-text-center","ion-text-uppercase","smallSize","online"],[1,"ion-text-center","ion-text-uppercase","smallSize","offline"],["class","ion-text-uppercase smallSize online",4,"ngIf"],["class","ion-text-uppercase ion-text-center smallSize online",4,"ngIf"],[1,"ion-text-uppercase","smallSize","online"],[1,"ion-text-uppercase","ion-text-center","smallSize","online"]],template:function(e,n){1&e&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar"),d.TgZ(2,"ion-buttons",0),d._UZ(3,"ion-back-button",1),d.qZA(),d.TgZ(4,"ion-buttons",2),d.TgZ(5,"ion-button",3),d.NdJ("click",function(){return n.addCustomer()}),d._UZ(6,"ion-icon",4),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"ion-content"),d.TgZ(8,"ion-row"),d.TgZ(9,"ion-col"),d.TgZ(10,"div",5),d.TgZ(11,"h4"),d._uU(12,"custumers List"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"ion-row",6),d.TgZ(14,"ion-col",7),d.TgZ(15,"div",8),d._uU(16,"firstName"),d.qZA(),d.qZA(),d.TgZ(17,"ion-col",7),d.TgZ(18,"div",8),d._uU(19,"status"),d.qZA(),d.qZA(),d.TgZ(20,"ion-col",7),d.TgZ(21,"div",8),d._uU(22,"Type"),d.qZA(),d.qZA(),d.TgZ(23,"ion-col",7),d.TgZ(24,"div",8),d._uU(25,"connect"),d.qZA(),d.qZA(),d.TgZ(26,"ion-col",9),d.TgZ(27,"div",8),d._uU(28,"phone"),d.qZA(),d.qZA(),d.TgZ(29,"ion-col",9),d.TgZ(30,"div",8),d._uU(31,"nbr Store"),d.qZA(),d.qZA(),d.qZA(),d.YNc(32,T,22,16,"ion-row",10),d.TgZ(33,"ion-row",11),d.TgZ(34,"ion-col"),d.TgZ(35,"div",5),d.TgZ(36,"h4"),d._uU(37,"custumers connect"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(38,"ion-row",6),d.TgZ(39,"ion-col",12),d.TgZ(40,"div",8),d._uU(41,"custumer"),d.qZA(),d.qZA(),d.TgZ(42,"ion-col",12),d.TgZ(43,"div",8),d._uU(44,"connect"),d.qZA(),d.qZA(),d.TgZ(45,"ion-col",13),d.TgZ(46,"div",8),d._uU(47,"Last Request"),d.qZA(),d.qZA(),d.TgZ(48,"ion-col",12),d.TgZ(49,"div",8),d._uU(50,"hour"),d.qZA(),d.qZA(),d.qZA(),d.YNc(51,w,11,6,"ion-row",10),d.qZA()),2&e&&(d.xp6(32),d.Q6J("ngForOf",n.custumers),d.xp6(19),d.Q6J("ngForOf",n.custumersConnect))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.YG,s.gu,s.W2,s.Nd,s.wI,o.sg,o.PC,o.O5],pipes:[Z,o.uU],styles:[".round[_ngcontent-%COMP%]{--width:3px;--height:3px;--vertical-align:middle;margin:5px;font-size:9px}.h3[_ngcontent-%COMP%]{text-transform:uppercase}.productname[_ngcontent-%COMP%]{background-color:#f1f1f1;font-size:10px}.montant[_ngcontent-%COMP%], .productname[_ngcontent-%COMP%]{font-weight:700}.divprod[_ngcontent-%COMP%]{width:100%}ion-col[_ngcontent-%COMP%]   .inte[_ngcontent-%COMP%]{font-size:9px}.data-lastrow[_ngcontent-%COMP%]{background-color:#f1f1f1}.data-lastrow[_ngcontent-%COMP%], .header-row[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:9px}.calcul[_ngcontent-%COMP%]{border:1px solid #f1f1f1}.pad[_ngcontent-%COMP%]{padding-top:15px}.header-row[_ngcontent-%COMP%]{background-color:#f1f1f1;color:#000}.smalle[_ngcontent-%COMP%]{font-weight:700;font-size:15px;padding:5px}.smallSize[_ngcontent-%COMP%]{font-size:10px}.offline[_ngcontent-%COMP%]{color:red}.online[_ngcontent-%COMP%]{color:#12f312}.userconnect[_ngcontent-%COMP%]{margin-top:35px}.enable[_ngcontent-%COMP%]{color:#1f8df3}ion-input[_ngcontent-%COMP%]{--background:#f1f1f1;--padding-start:15px;--padding-end:15px;--padding-top:15px;--padding-bottom:15px;font-weight:700}ion-col[_ngcontent-%COMP%]   .commande[_ngcontent-%COMP%], ion-input[_ngcontent-%COMP%]{font-size:11px}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[c.Bz.forChild(S)],c.Bz]}),e})();var O=t(3117);let P=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[o.ez,i.u5,s.Pc,U,O.K]]}),e})()}}]);