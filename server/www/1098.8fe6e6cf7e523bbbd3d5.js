(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[1098],{2980:(i,e,o)=>{"use strict";o.r(e),o.d(e,{PurchaseConfirmPageModule:()=>I});var n=o(1511),t=o(6073),s=o(8158),c=o(8777),r=o(5416),a=o(5959),l=o(1572),d=o(5946),g=o(2874),u=o(4375),Z=o(2185),m=o(4144),f=o(2968),p=o(4069),h=o(3629);function q(i,e){1&i&&(l.TgZ(0,"ion-row"),l.TgZ(1,"ion-col",2),l.TgZ(2,"div",9),l._uU(3," En cours de traitement ... "),l.qZA(),l.qZA(),l.qZA())}function A(i,e){if(1&i){const i=l.EpF();l.TgZ(0,"ion-button",15),l.NdJ("click",function(){l.CHM(i);const e=l.oxw(),o=e.$implicit,n=e.index;return l.oxw(2).valider(o,n)}),l._uU(1,"valider"),l.qZA()}if(2&i){const i=l.oxw().$implicit;l.Q6J("disabled",i.confirm)}}function T(i,e){1&i&&(l.TgZ(0,"p",16),l._uU(1," En cours de livraison... "),l.qZA())}function v(i,e){1&i&&(l.TgZ(0,"p",16),l._uU(1," En cours de livraison... "),l.qZA())}function b(i,e){1&i&&(l.TgZ(0,"p",17),l._uU(1," Livr\xe9 "),l.qZA())}const x=function(i){return{"background-color":i}},w=function(i){return{masque:i}},C=function(i){return[i,"FCFA","symbol","3.0-0","fr"]};function U(i,e){if(1&i&&(l.TgZ(0,"ion-row",10),l.TgZ(1,"ion-col",6),l.TgZ(2,"div",11),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"ion-col",6),l.TgZ(5,"div",11),l._uU(6),l.qZA(),l.qZA(),l.TgZ(7,"ion-col",6),l.TgZ(8,"div",11),l._uU(9),l.qZA(),l.qZA(),l.TgZ(10,"ion-col",6),l.TgZ(11,"div",11),l._uU(12),l.ALo(13,"currency"),l.qZA(),l.qZA(),l.TgZ(14,"ion-col",6),l.TgZ(15,"div",11),l._uU(16),l.ALo(17,"currency"),l.qZA(),l.qZA(),l.TgZ(18,"ion-col",6),l.TgZ(19,"div",7),l.YNc(20,A,2,1,"ion-button",12),l.YNc(21,T,2,0,"p",13),l.YNc(22,v,2,0,"p",13),l.YNc(23,b,2,0,"p",14),l.qZA(),l.qZA(),l.qZA()),2&i){const i=e.$implicit,o=e.index,n=l.oxw(2);l.Q6J("ngStyle",l.VKq(23,x,o%2==0?"#f1f1f1":"white"))("ngClass",l.VKq(25,w,i.confirm)),l.xp6(3),l.hij(" ",i.request.item.name," "),l.xp6(3),l.hij(" ",i.request.qty," "),l.xp6(3),l.hij(" ",i.accept," "),l.xp6(3),l.hij(" ",l.G7q(13,11,l.VKq(27,C,i.request.item.sellingPrice))," "),l.xp6(4),l.hij(" ",l.G7q(17,17,l.VKq(29,C,i.request.item.sellingPrice*i.accept))," "),l.xp6(4),l.Q6J("ngIf",n.doc.swConfirm&&!n.tabRoles.includes(7)),l.xp6(1),l.Q6J("ngIf",!n.doc.swConfirm&&!n.tabRoles.includes(7)),l.xp6(1),l.Q6J("ngIf",!n.doc.managerConfirm&&n.tabRoles.includes(7)&&n.doc.swConfirm),l.xp6(1),l.Q6J("ngIf",n.doc.managerConfirm&&n.tabRoles.includes(7)&&n.doc.swConfirm)}}function y(i,e){if(1&i&&(l.TgZ(0,"ion-grid"),l.TgZ(1,"ion-row",5),l.TgZ(2,"ion-col",6),l.TgZ(3,"div",7),l._uU(4,"Name"),l.qZA(),l.qZA(),l.TgZ(5,"ion-col",6),l.TgZ(6,"div",7),l._uU(7,"Q. command\xe9"),l.qZA(),l.qZA(),l.TgZ(8,"ion-col",6),l.TgZ(9,"div",7),l._uU(10,"Q. livr\xe9"),l.qZA(),l.qZA(),l.TgZ(11,"ion-col",6),l.TgZ(12,"div",7),l._uU(13,"prix.U"),l.qZA(),l.qZA(),l.TgZ(14,"ion-col",6),l.TgZ(15,"div",7),l._uU(16,"prix.T"),l.qZA(),l.qZA(),l.TgZ(17,"ion-col",6),l._UZ(18,"div",7),l.qZA(),l.qZA(),l.YNc(19,q,4,0,"ion-row",4),l.YNc(20,U,24,31,"ion-row",8),l.qZA()),2&i){const i=l.oxw();l.xp6(19),l.Q6J("ngIf",!i.doc.scConfirm),l.xp6(1),l.Q6J("ngForOf",i.doc.AgenceCommande)}}const _=[{path:"",component:(()=>{class i{constructor(i,e,o,n,t,s,c,r,l,d,g){this.menu=i,this.adminService=e,this.notifi=o,this.random=n,this.swService=t,this.restApiService=s,this.router=c,this.urlService=r,this.servicelistService=l,this.scService=d,this.location=g,this.destroy$=new a.xQ,this.tabRoles=[]}ngOnInit(){this.takeUrl(),console.log(this.random.getData())}ionViewDidEnter(){this.tabRoles=this.random.getTabRole(),this.tabRoles.includes(7),this.menu.enable(!0,"first"),this.getPurchase()}takeUrl(){this.urlService.getUrl().pipe((0,r.R)(this.destroy$)).subscribe(i=>{console.log("url ici===",i)})}getPurchase(){console.log(this.random.getData());let i=this.random.getData();this.doc=i}valider(i,e){console.log(i),console.log(this.doc.AgenceCommande);let o="",n=this.random.getUserCredentail();n&&(o=n._id),this.doc.AgenceCommande[e].confirm=!0,this.doc.AgenceCommande.every(i=>i.confirm)&&(this.doc.managerConfirm=!0),this.sendServiceList({adminId:this.doc.adminId,id:i.request.item._id,name:i.request.item.name,newquantity:i.accept,senderId:o,storeId:i.request.item.storeId,purchase:this.doc},e)}sendServiceList(i,e){this.notifi.presentLoading(),this.servicelistService.updateServiceItemQuantity(i).subscribe(i=>{this.notifi.dismissLoading(),this.notifi.presentToast("successfuly!!!","primary"),this.doc.AgenceCommande[e].managerConfim=!0},i=>{this.notifi.dismissLoading(),this.notifi.presentToast("impossible de confirmer cette op\xe9ration !!!","danger"),console.log(i)})}}return i.\u0275fac=function(e){return new(e||i)(l.Y36(s._q),l.Y36(d.l),l.Y36(g.g),l.Y36(u.i),l.Y36(Z.f),l.Y36(m.e),l.Y36(c.F0),l.Y36(f.i),l.Y36(p.y),l.Y36(h.A),l.Y36(n.Ye))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-purchase-confirm"]],decls:11,vars:1,consts:[["slot","start"],["defaultHref","/purchase"],["size","12"],[1,"ion-text-center","ion-text-uppercase"],[4,"ngIf"],[1,"header-component"],["size-sm","2","size-md","2","size-lg","2"],[1,"ion-text-center"],["class","data-row data-update",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],[1,"ion-text-center","ion-text-uppercase",2,"color","var(--ion-color-danger)"],[1,"data-row","data-update",3,"ngStyle","ngClass"],[1,"ion-text-center","ion-text-uppercase","smallSize"],["size","small",3,"disabled","click",4,"ngIf"],["style","color: var(--ion-color-danger)",4,"ngIf"],["style","color: var(--ion-color-success)",4,"ngIf"],["size","small",3,"disabled","click"],[2,"color","var(--ion-color-danger)"],[2,"color","var(--ion-color-success)"]],template:function(i,e){1&i&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l._UZ(3,"ion-back-button",1),l.qZA(),l.qZA(),l.qZA(),l.TgZ(4,"ion-content"),l.TgZ(5,"ion-grid"),l.TgZ(6,"ion-row"),l.TgZ(7,"ion-col",2),l.TgZ(8,"div",3),l._uU(9," Bordereau de livraison "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(10,y,21,2,"ion-grid",4),l.qZA()),2&i&&(l.xp6(10),l.Q6J("ngIf",e.doc))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.W2,s.jY,s.Nd,s.wI,n.O5,n.sg,n.PC,n.mk,s.YG],pipes:[n.H9],styles:[".masque[_ngcontent-%COMP%]{opacity:.8}"]}),i})()}];let Y=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[c.Bz.forChild(_)],c.Bz]}),i})(),I=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[n.ez,t.u5,s.Pc,Y]]}),i})()}}]);