(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[7339],{7339:(t,n,e)=>{"use strict";e.r(n),e.d(n,{UpdateOrderPageModule:()=>k});var i=e(1511),o=e(6073),c=e(8158),r=e(8777),s=e(4762),l=e(529),d=e(1572),m=e(3437),a=e(5946),g=e(7886),p=e(2968);function u(t,n){if(1&t&&(d.TgZ(0,"ion-col",13),d.TgZ(1,"div",25),d.TgZ(2,"small",26),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.hij(" ",t.item.name,"")}}function f(t,n){1&t&&(d.TgZ(0,"ion-col",13),d.TgZ(1,"div",25),d.TgZ(2,"small",26),d._uU(3," glac\xe9 "),d.qZA(),d.qZA(),d.qZA())}function Z(t,n){if(1&t&&(d.TgZ(0,"div",29),d._uU(1),d.qZA()),2&t){const t=d.oxw(2).$implicit;d.xp6(1),d.hij(" ",t.item.modeG," ")}}function x(t,n){if(1&t&&(d.TgZ(0,"ion-col",27),d.YNc(1,Z,2,1,"div",28),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(1),d.Q6J("ngIf",t.item.modeG>0)}}const h=function(t){return[t,"FCFA","symbol","3.0-0","fr"]};function q(t,n){if(1&t&&(d.TgZ(0,"ion-col",13),d.TgZ(1,"div",30),d.TgZ(2,"small",31),d._uU(3),d.ALo(4,"currency"),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.hij(" ",d.G7q(4,1,d.VKq(7,h,t.item.sellingPrice)),"")}}function A(t,n){if(1&t&&(d.TgZ(0,"ion-col",13),d.TgZ(1,"div",30),d.TgZ(2,"small",31),d._uU(3),d.ALo(4,"currency"),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.hij(" ",d.G7q(4,1,d.VKq(7,h,t.item.sellingPrice*t.item.modeG)),"")}}function T(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"ion-col",32),d.TgZ(1,"div",30),d.TgZ(2,"ion-button",33),d.NdJ("click",function(){d.CHM(t);const n=d.oxw(),e=n.$implicit,i=n.index,o=d.oxw(),c=o.$implicit,r=o.index,s=d.oxw(2);return s.removeOne(e,c.products,s.order.commandes,i,r,"modeG")}),d._UZ(3,"ion-icon",34),d.qZA(),d.qZA(),d.qZA()}}function _(t,n){if(1&t&&(d.TgZ(0,"ion-col",13),d.TgZ(1,"div",25),d.TgZ(2,"small",26),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.hij(" ",t.item.name,"")}}function C(t,n){1&t&&(d.TgZ(0,"ion-col",13),d.TgZ(1,"div",25),d.TgZ(2,"small",26),d._uU(3," non glac\xe9 "),d.qZA(),d.qZA(),d.qZA())}function v(t,n){if(1&t&&(d.TgZ(0,"ion-col",13),d.TgZ(1,"div",29),d._uU(2),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(2),d.hij(" ",t.item.modeNG," ")}}function O(t,n){if(1&t&&(d.TgZ(0,"ion-col",13),d.TgZ(1,"div",30),d.TgZ(2,"small",31),d._uU(3),d.ALo(4,"currency"),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.hij(" ",d.G7q(4,1,d.VKq(7,h,t.item.sellingPrice)),"")}}function P(t,n){if(1&t&&(d.TgZ(0,"ion-col",13),d.TgZ(1,"div",30),d.TgZ(2,"small",31),d._uU(3),d.ALo(4,"currency"),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.hij(" ",d.G7q(4,1,d.VKq(7,h,t.item.sellingPrice*t.item.modeNG)),"")}}function w(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"ion-col",32),d.TgZ(1,"div",30),d.TgZ(2,"ion-button",33),d.NdJ("click",function(){d.CHM(t);const n=d.oxw(),e=n.$implicit,i=n.index,o=d.oxw(),c=o.$implicit,r=o.index,s=d.oxw(2);return s.removeOne(e,c.products,s.order.commandes,i,r,"modeNG")}),d._UZ(3,"ion-icon",34),d.qZA(),d.qZA(),d.qZA()}}function N(t,n){if(1&t&&(d.TgZ(0,"ion-col",10),d.TgZ(1,"div",25),d.TgZ(2,"small",26),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.hij(" ",t.item.name,"")}}function G(t,n){1&t&&(d.TgZ(0,"ion-col",10),d.TgZ(1,"div",25),d.TgZ(2,"small",26),d._uU(3," ... "),d.qZA(),d.qZA(),d.qZA())}function M(t,n){if(1&t&&(d.TgZ(0,"ion-col",10),d.TgZ(1,"div",25),d.TgZ(2,"small"),d._uU(3),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.hij(" ",t.qty," ")}}function b(t,n){if(1&t&&(d.TgZ(0,"ion-col",10),d.TgZ(1,"div",25),d.TgZ(2,"small",31),d._uU(3),d.ALo(4,"currency"),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.hij(" ",t.item.sellingPrice?t.item.sellingPrice:d.G7q(4,1,d.VKq(7,h,t.item.purchasingPrice)),"")}}function I(t,n){if(1&t&&(d.TgZ(0,"ion-col",13),d.TgZ(1,"div",35),d.TgZ(2,"small",31),d._uU(3),d.ALo(4,"currency"),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(3),d.hij(" ",d.G7q(4,1,d.VKq(7,h,t.price)),"")}}function y(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"ion-col",32),d.TgZ(1,"div",30),d.TgZ(2,"ion-button",33),d.NdJ("click",function(){d.CHM(t);const n=d.oxw(),e=n.$implicit,i=n.index,o=d.oxw(),c=o.$implicit,r=o.index,s=d.oxw(2);return s.removeOne(e,c.products,s.order.commandes,i,r,"resto")}),d._UZ(3,"ion-icon",34),d.qZA(),d.qZA(),d.qZA()}}const U=function(t){return{"background-color":t}};function z(t,n){if(1&t&&(d.TgZ(0,"ion-row",18),d.YNc(1,u,4,1,"ion-col",19),d.YNc(2,f,4,0,"ion-col",19),d.YNc(3,x,2,1,"ion-col",20),d.YNc(4,q,5,9,"ion-col",19),d.YNc(5,A,5,9,"ion-col",19),d.YNc(6,T,4,0,"ion-col",21),d.YNc(7,_,4,1,"ion-col",19),d.YNc(8,C,4,0,"ion-col",19),d.YNc(9,v,3,1,"ion-col",19),d.YNc(10,O,5,9,"ion-col",19),d.YNc(11,P,5,9,"ion-col",19),d.YNc(12,w,4,0,"ion-col",22),d.YNc(13,N,4,1,"ion-col",23),d.YNc(14,G,4,0,"ion-col",23),d.YNc(15,M,4,1,"ion-col",23),d.YNc(16,b,5,9,"ion-col",23),d.YNc(17,I,5,9,"ion-col",24),d.YNc(18,y,4,0,"ion-col",22),d.qZA()),2&t){const t=n.$implicit;d.Q6J("ngStyle",d.VKq(19,U,n.index%2==0?"#f1f1f1":"white")),d.xp6(1),d.Q6J("ngIf",t.item.modeG),d.xp6(1),d.Q6J("ngIf",t.item.modeG),d.xp6(1),d.Q6J("ngIf",t.item.modeG>0),d.xp6(1),d.Q6J("ngIf",t.item.modeG),d.xp6(1),d.Q6J("ngIf",t.item.modeG),d.xp6(1),d.Q6J("ngIf",t.item.modeG),d.xp6(1),d.Q6J("ngIf",t.item.modeNG),d.xp6(1),d.Q6J("ngIf",t.item.modeNG),d.xp6(1),d.Q6J("ngIf",t.item.modeNG),d.xp6(1),d.Q6J("ngIf",t.item.modeNG),d.xp6(1),d.Q6J("ngIf",t.item.modeNG),d.xp6(1),d.Q6J("ngIf",t.item.modeNG),d.xp6(1),d.Q6J("ngIf",!t.item.modeNG&&!t.item.modeG),d.xp6(1),d.Q6J("ngIf",!t.item.modeNG&&!t.item.modeG),d.xp6(1),d.Q6J("ngIf",!t.item.modeNG&&!t.item.modeG),d.xp6(1),d.Q6J("ngIf",!t.item.modeNG&&!t.item.modeG),d.xp6(1),d.Q6J("ngIf",!t.item.modeNG&&!t.item.modeG),d.xp6(1),d.Q6J("ngIf",!t.item.modeNG&&!t.item.modeG)}}function J(t,n){if(1&t&&(d.TgZ(0,"div"),d.TgZ(1,"div",15),d._uU(2),d.TgZ(3,"div",16),d._uU(4),d.ALo(5,"currency"),d.qZA(),d.qZA(),d.YNc(6,z,19,21,"ion-row",17),d.qZA()),2&t){const t=n.$implicit,e=n.index;d.xp6(2),d.hij(" commande ",e+1," "),d.xp6(2),d.hij(" total: ",d.G7q(5,3,d.VKq(9,h,t.cartdetails.totalPrice))," "),d.xp6(2),d.Q6J("ngForOf",t.products)}}function Y(t,n){if(1&t&&(d.TgZ(0,"div",null,7),d.TgZ(2,"p",8),d._uU(3),d.qZA(),d.TgZ(4,"div"),d.TgZ(5,"ion-row",9),d.TgZ(6,"ion-col",10),d.TgZ(7,"div",11),d._uU(8,"name"),d.qZA(),d.qZA(),d.TgZ(9,"ion-col",10),d.TgZ(10,"div",11),d._uU(11,"status"),d.qZA(),d.qZA(),d.TgZ(12,"ion-col",12),d.TgZ(13,"div",11),d._uU(14,"Qty"),d.qZA(),d.qZA(),d.TgZ(15,"ion-col",13),d.TgZ(16,"div",11),d._uU(17,"price"),d.qZA(),d.qZA(),d.TgZ(18,"ion-col",13),d.TgZ(19,"div",11),d._uU(20,"T.price"),d.qZA(),d.qZA(),d.TgZ(21,"ion-col",13),d.TgZ(22,"div",11),d._uU(23,"Action"),d.qZA(),d.qZA(),d.qZA(),d.YNc(24,J,7,11,"div",14),d.qZA(),d.qZA()),2&t){const t=d.oxw();d.xp6(3),d.AsE(" table: ",t.order.tableNumber," \xa0 \xa0 ",t.order.userName," "),d.xp6(21),d.Q6J("ngForOf",t.order.commandes)}}const Q=[{path:"",component:(()=>{class t{constructor(t,n,e,i,o,c,r){this.manageCartService=t,this.adminService=n,this.router=e,this.platform=i,this.httpN=o,this.urlService=c,this.loadingController=r,this.url="http://192.168.100.10:3000/",this.isLoading=!1,this.display(JSON.parse(localStorage.getItem("order_update"))),this.takeUrl()}takeUrl(){l.N.production?this.urlService.getUrl().subscribe(t=>{this.url=t}):this.url=l.V}ngOnInit(){}ionViewWillEnter(){}removeOne(t,n,e,i,o,c){return(0,s.mG)(this,void 0,void 0,function*(){console.log(e[o]);let n=e[o].montantRecu,r=t.item._id,s=e[o].cartdetails;if(console.log(s.items[r]),"modeG"===c){if(console.log(c),0==s.items[r].item.modeG)return}else if("modeNG"===c){if(0==s.items[r].item.modeNG)return}else if(0==s.items[r].item.qty)return;let l=yield this.manageCartService.removeOneToCart2(r,s);console.log(l);let d={products:l.products,cartdetails:{items:l.items,totalPrice:l.totalPrice,totalQty:l.totalQty,montantRecu:n},montantRecu:n};"modeG"===c?d.products[i].item.modeG=d.products[i].item.modeG-1:"modeNG"===c?d.products[i].item.modeNG=d.products[i].item.modeNG-1:d.products[i].item.qty=d.products[i].item.qty-1,this.order2=this.order,this.order2.commandes[o]=d,this.order2.commandes.splice(o,1,d),setTimeout(()=>{this.order=this.order2},100)})}display(t){this.order=t,this.oldCommande=t.commandes}confirmUpdate(){let t=JSON.parse(localStorage.getItem("old")),n=t.localId;this.oldCommande=t.commandes,this.presentLoading3();let e=localStorage.getItem("adminId");if(this.platform.is("desktop"))this.adminService.cancelAndUpdate(n,this.oldCommande,this.order.commandes).subscribe(t=>{this.dismissLoading(),localStorage.removeItem("order_update"),localStorage.removeItem("old"),this.router.navigateByUrl("activitie")},t=>{console.log(t)});else{let t=JSON.stringify({localId:n,oldCommande:this.oldCommande,newCommande:this.order.commandes,adminId:e,cancelupdate:1,url:this.url+`invoice/confirmOders/invoice/cancel/and/update/changes/values?db=${e}`}),i=this.url+`invoice/confirmOders/invoice/cancel/and/update/changes/values?localId=${n}`;this.httpN.setDataSerializer("utf8"),this.httpN.post(i,t,{}).then(t=>{this.dismissLoading(),localStorage.removeItem("order_update"),localStorage.removeItem("old"),this.router.navigateByUrl("activitie")}).catch(t=>{this.dismissLoading(),alert(JSON.stringify(t))})}}presentLoading3(){return(0,s.mG)(this,void 0,void 0,function*(){return this.isLoading=!0,yield this.loadingController.create({duration:6e3,cssClass:"my-custom-class",message:"Traitement en cours..."}).then(t=>{t.present().then(()=>{this.isLoading||t.dismiss().then()})})})}dismissLoading(){return(0,s.mG)(this,void 0,void 0,function*(){return this.isLoading=!1,yield this.loadingController.dismiss().then()})}}return t.\u0275fac=function(n){return new(n||t)(d.Y36(m.B),d.Y36(a.l),d.Y36(r.F0),d.Y36(c.t4),d.Y36(g.t),d.Y36(p.i),d.Y36(c.HT))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-update-order"]],decls:9,vars:1,consts:[["color","primary"],["slot","start"],["autoHide","false"],["slot","end"],["color","success",3,"click"],["name","checkmark-done-outline"],[4,"ngIf"],["myBill",""],[1,"centered",2,"text-transform","uppercase","text-align","center"],[1,"header-row"],["size","2","size-md","2"],[1,"ion-text-center"],["size","1","size-md","2"],["size","2","size-md","2",1,"ion-align-self-center"],[4,"ngFor","ngForOf"],[1,"numcommande"],[1,"numcommandeprice"],["class","data-row data-update",3,"ngStyle",4,"ngFor","ngForOf"],[1,"data-row","data-update",3,"ngStyle"],["class","ion-align-self-center","size","2","size-md","2",4,"ngIf"],["class","ion-align-self-center","size","1","size-md","2",4,"ngIf"],["class","ion-align-self-center","size","2",4,"ngIf"],["size","2","class","ion-align-self-center",4,"ngIf"],["size","2","size-md","2",4,"ngIf"],["size","2","class","ion-align-self-center","size-md","2",4,"ngIf"],[1,"ion-text-center","ion-text-uppercase","ion-text-nowrap"],[1,"namesmall"],["size","1","size-md","2",1,"ion-align-self-center"],["class","ion-text-center ion-text-uppercase",4,"ngIf"],[1,"ion-text-center","ion-text-uppercase"],[1,"ion-text-center","ion-text-wrap"],[1,"pricesmall"],["size","2",1,"ion-align-self-center"],["size","small","fill","clear",3,"click"],["name","remove-circle-outline"],[1,"ion-text-center","ion-text-nowrap"]],template:function(t,n){1&t&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar",0),d.TgZ(2,"ion-buttons",1),d._UZ(3,"ion-menu-button",2),d.qZA(),d.TgZ(4,"ion-buttons",3),d.TgZ(5,"ion-button",4),d.NdJ("click",function(){return n.confirmUpdate()}),d._UZ(6,"ion-icon",5),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(7,"ion-content"),d.YNc(8,Y,25,3,"div",6),d.qZA()),2&t&&(d.xp6(8),d.Q6J("ngIf",n.order))},directives:[c.Gu,c.sr,c.Sm,c.fG,c.YG,c.gu,c.W2,i.O5,c.Nd,c.wI,i.sg,i.PC],pipes:[i.H9],styles:[".productname[_ngcontent-%COMP%]{text-align:left;border:none;padding:0}p[_ngcontent-%COMP%]{font-size:9px}h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase}h3[_ngcontent-%COMP%]{font-weight:700}h3[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:8px}h4[_ngcontent-%COMP%]{font-weight:700;font-size:11px}h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{text-transform:uppercase}h5[_ngcontent-%COMP%]{font-size:10px}.col[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.footer[_ngcontent-%COMP%]{background-color:#fff;padding:8%;position:relative}.footer2[_ngcontent-%COMP%]{background-color:#08d46e;padding:3%;text-align:center}.titlePrice[_ngcontent-%COMP%]{position:absolute;font-size:13px}.titleEmploye[_ngcontent-%COMP%]{position:absolute;left:82%;bottom:5%}.displayDetails[_ngcontent-%COMP%]{text-align:inherit;font-size:14px;color:#000}.spane[_ngcontent-%COMP%]{color:#2c63fa}.allRow[_ngcontent-%COMP%]{text-transform:uppercase}.numberIntable[_ngcontent-%COMP%]{text-align:right;border:none;padding:0}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{border-top:1px solid #000;border-collapse:collapse}td.description[_ngcontent-%COMP%], th.description[_ngcontent-%COMP%]{width:75px;max-width:75px}td.price[_ngcontent-%COMP%], td.quantity[_ngcontent-%COMP%], th.price[_ngcontent-%COMP%], th.quantity[_ngcontent-%COMP%]{width:40px;max-width:40px;word-break:break-all}.centered[_ngcontent-%COMP%]{text-align:center;align-content:center}.ticket[_ngcontent-%COMP%]{width:155px;max-width:155px;margin:0 auto}img[_ngcontent-%COMP%]{max-width:inherit;width:inherit}@media print{.hidden-print[_ngcontent-%COMP%], .hidden-print[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:none!important}}.header-row[_ngcontent-%COMP%]{font-weight:500;border-bottom:2px solid #f1f1f1;color:#000;background-color:#fff}.header-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-transform:uppercase;font-size:11px}.data-row[_ngcontent-%COMP%]{border-bottom:1px solid #f1f1f1}.divrow[_ngcontent-%COMP%]{width:100%}.namesmall[_ngcontent-%COMP%]{font-size:9px}.pricesmall[_ngcontent-%COMP%]{font-size:10px}.totalsmall[_ngcontent-%COMP%]{font-weight:700}.size[_ngcontent-%COMP%]{font-size:9px}a[_ngcontent-%COMP%]{margin-right:5px}ion-input[_ngcontent-%COMP%]{--background:#fff;--padding-start:15px;--padding-end:15px;--padding-top:15px;--padding-bottom:15px;font-size:16px;font-weight:700}.numcommande[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase}.numcommandeprice[_ngcontent-%COMP%]{font-size:12px;font-weight:700}"]}),t})()}];let S=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[r.Bz.forChild(Q)],r.Bz]}),t})(),k=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[i.ez,o.u5,c.Pc,S]]}),t})()}}]);