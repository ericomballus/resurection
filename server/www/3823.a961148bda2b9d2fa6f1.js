(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[3823],{3823:(i,e,n)=>{"use strict";n.r(e),n.d(e,{InvoiceUnpaidPageModule:()=>q});var t=n(1511),o=n(6073),s=n(8777),a=n(8158),r=n(1064),l=n(4762),c=n(1572),d=n(5946),g=n(731),Z=n(4375),u=n(2874);const m=function(i){return{"background-color":i}},h=function(i){return[i,"FCFA","symbol","3.0-0","fr"]},f=function(){return[0,"FCFA","symbol","3.0-0","fr"]};function p(i,e){if(1&i){const i=c.EpF();c.TgZ(0,"ion-row",10),c.TgZ(1,"ion-col",11),c.TgZ(2,"div",12),c.TgZ(3,"small",13),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.TgZ(5,"ion-col",14),c.TgZ(6,"div",12),c.TgZ(7,"small",13),c._uU(8),c.ALo(9,"currency"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"ion-col",14),c.TgZ(11,"div",12),c.TgZ(12,"small",13),c._uU(13),c.ALo(14,"currency"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"ion-col",14),c.TgZ(16,"div",12),c.TgZ(17,"small",13),c._uU(18),c.ALo(19,"date"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(20,"ion-col",14),c.TgZ(21,"div",12),c.TgZ(22,"small",13),c._uU(23,' ""'),c.qZA(),c.qZA(),c.qZA(),c.TgZ(24,"ion-col",14),c.TgZ(25,"div",12),c.TgZ(26,"small",13),c._uU(27),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"ion-col",11),c.TgZ(29,"div",15),c.TgZ(30,"ion-buttons",16),c.TgZ(31,"ion-button",17),c.NdJ("click",function(){c.CHM(i);const n=e.$implicit;return c.oxw().presentActionSheet(n)}),c._uU(32," action "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&i){const i=e.$implicit;c.Q6J("ngStyle",c.VKq(21,m,e.index%2==0?"#f1f1f1":"white")),c.xp6(4),c.hij(" ",i.numFacture,""),c.xp6(4),c.hij(" ",c.G7q(9,6,c.VKq(23,h,i.commande.cartdetails.totalPrice)),""),c.xp6(5),c.hij(" ",i.commande.montantReduction?i.commande.montantReduction:c.G7q(14,12,c.DdM(25,f)),""),c.xp6(5),c.hij(" ",c.xi3(19,18,i.created,"medium"),""),c.xp6(9),c.hij(" ",i.userName,"")}}const A=[{path:"",component:(()=>{class i{constructor(i,e,n,t,o,s,a){this.adminService=i,this.modalController=e,this.translateConfigService=n,this.translate=t,this.saveRandom=o,this.notifi=s,this.actionSheet=a,this.invoices=[],this.tabRoles=[],this.admin=!1,this.manager=!1,this.numPage=0,this.nbrPages=0,this.traduction=!1}ngOnInit(){this.languageChanged(),this.getInvoice()}getInvoice(){this.invoices=this.saveRandom.getCustomerInvoices(),console.log(this.invoices)}displayDetails(i){return(0,l.mG)(this,void 0,void 0,function*(){})}loadData(i){}languageChanged(){console.log("lang shop page");let i=localStorage.getItem("language");i&&this.translateConfigService.setLanguage(i)}getOrders(){}manageInvoice(i){this.notifi.presentAlertConfirm(`confirmer la paiement de la facture ${i.numFacture} ?`,"oui","non").then(()=>{this.notifi.presentLoading(),i.commande.montantRecu>=i.commande.cartdetails.totalPrice&&i.commande.confirmPaie&&(i.sale=!0,i.cash=!0),this.adminService.buyAndUpdateOrder(i).subscribe(e=>{this.notifi.dismissLoading(),e&&e.delete&&this.notifi.presentAlertConfirm(` ${e.message} la supprim\xe9e ?`,"oui","non").then(()=>{this.notifi.presentLoading(),this.adminService.deleteOrder(i).subscribe(e=>{this.invoices=this.invoices.filter(e=>e._id!==i._id),this.notifi.dismissLoading(),this.notifi.presentToast(e.message,"primary")})}),console.log("response",e)},i=>{console.log("error send",i)})})}deleteOrder(i){this.notifi.presentAlertConfirm("Voulez vous vraiment supprimer?","Yes","No").then(()=>{let e=[];i.invoiceCancel=!0,this.notifi.presentLoading(),i.commandes.forEach(i=>{e=e.length?[...e,...i.products]:i.products}),this.adminService.cancelOrder2(i.localId,e,i).subscribe(e=>{this.notifi.dismissLoading(),this.notifi.presentToast("facture supprim\xe9e","primary"),this.invoices=this.invoices.filter(e=>e._id!==i._id)},i=>{console.log(i),this.notifi.dismissLoading().then(()=>{})})}).catch(()=>{})}presentActionSheet(i){return(0,l.mG)(this,void 0,void 0,function*(){const e=yield this.actionSheet.create({header:"",buttons:[{text:"Payer ?",icon:"share",handler:()=>{this.manageInvoice(i)}},{text:"Supprimer",role:"destructive",icon:"trash",handler:()=>{this.deleteOrder(i)}},{text:"Cancel",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield e.present();const{role:n,data:t}=yield e.onDidDismiss();console.log("onDidDismiss resolved with role and data",n,t)})}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(d.l),c.Y36(a.IN),c.Y36(g.w),c.Y36(r.sK),c.Y36(Z.i),c.Y36(u.g),c.Y36(a.BX))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-invoice-unpaid"]],viewQuery:function(i,e){if(1&i&&c.Gf(a.ju,1),2&i){let i;c.iGM(i=c.CRH())&&(e.infiniteScroll=i.first)}},decls:39,vars:4,consts:[[1,"titre"],["slot","start"],["defaultHref","/point-of-sale"],[1,"header-row"],["size","1","size-md","1"],[1,"ion-text-center"],["size","2","size-md","2"],["class","data-row data-update",3,"ngStyle",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],[1,"data-row","data-update",3,"ngStyle"],["size","1","size-md","1",1,"ion-align-self-center"],[1,"ion-text-center","ion-text-uppercase","ion-text-nowrap"],[1,"namesmall"],["size","2","size-md","2",1,"ion-align-self-center"],[1,"ion-text-center","inte"],["slot","end"],["size","small","fill","clear",3,"click"]],template:function(i,e){1&i&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title",0),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"ion-buttons",1),c._UZ(6,"ion-back-button",2),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"ion-content"),c.TgZ(8,"ion-row",3),c.TgZ(9,"ion-col",4),c.TgZ(10,"div",5),c.TgZ(11,"small"),c._uU(12,"N0"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"ion-col",6),c.TgZ(14,"div",5),c.TgZ(15,"small"),c._uU(16,"montant"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"ion-col",6),c.TgZ(18,"div",5),c.TgZ(19,"small"),c._uU(20,"A.Reduction"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"ion-col",6),c.TgZ(22,"div",5),c.TgZ(23,"small"),c._uU(24,"date"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"ion-col",6),c.TgZ(26,"div",5),c.TgZ(27,"small"),c._uU(28,"client"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"ion-col",6),c.TgZ(30,"div",5),c.TgZ(31,"small"),c._uU(32,"name"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(33,"ion-col",4),c.TgZ(34,"div",5),c._UZ(35,"small"),c.qZA(),c.qZA(),c.qZA(),c.YNc(36,p,33,26,"ion-row",7),c.TgZ(37,"ion-infinite-scroll",8),c.NdJ("ionInfinite",function(i){return e.loadData(i)}),c._UZ(38,"ion-infinite-scroll-content",9),c.qZA(),c.qZA()),2&i&&(c.xp6(3),c.Oqu(c.lcZ(4,2,"MENU.invoicesnonpayee")),c.xp6(33),c.Q6J("ngForOf",e.invoices))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.oU,a.cs,a.W2,a.Nd,a.wI,t.sg,a.ju,a.MB,t.PC,a.YG],pipes:[r.X$,t.H9,t.uU],styles:[""]}),i})()}];let q=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[t.ez,o.u5,a.Pc,s.Bz.forChild(A),r.aw.forChild()]]}),i})()}}]);