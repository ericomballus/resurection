(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[4218],{6048:(t,e,i)=>{"use strict";i.d(e,{a:()=>p});var s=i(1572),o=i(8158),r=i(6863),c=i(1094),n=i(2874),a=i(1511);function d(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-img",2),s.NdJ("ionError",function(){return s.CHM(t),s.oxw().noImageLoad()}),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("src",t._src)}}function l(t,e){1&t&&(s.TgZ(0,"div",4),s._UZ(1,"ion-spinner"),s.qZA())}function h(t,e){1&t&&(s.TgZ(0,"div",4),s._UZ(1,"ion-skeleton-text",5),s.qZA())}function u(t,e){if(1&t&&(s.YNc(0,l,2,0,"div",3),s.YNc(1,h,2,0,"div",3)),2&t){const t=s.oxw();s.Q6J("ngIf",t.spinner),s.xp6(1),s.Q6J("ngIf",!t.spinner)}}let p=(()=>{class t{constructor(t,e,i,s){this.platform=t,this.printerService=e,this.cacheService=i,this.notifi=s,this._src="",this.spinner=!1,this.isLoad=!1}ngOnInit(){}set src(t){if(this.comming=t,this.platform.is("electron"))this._src=t;else if(this.platform.is("desktop")||this.platform.is("mobileweb"))this._src=t;else if(this.platform.is("android")){this._src="";let e=`${t.split("/").pop().split("?").shift()}.png`;this.printerService.checkFileExist(e).then(t=>{this.printerService.loadUrl(e).then(t=>{t&&(this._src=t)}).catch(t=>{this._src="../../assets/noimage.png",this.notifi.presentToast(`impossible de lire le chemein de l'image ${e}`,"danger")})}).catch(i=>{this.printerService.downloadItemsImages(t,e).then(t=>{this.printerService.loadUrl(e).then(t=>{t&&(this._src=t)}).catch(t=>{this._src="../../assets/noimage.png",this.notifi.presentToast(`impossible de lire le chemein de l'image ${e}`,"danger")})}).catch(e=>{this._src="../../assets/noimage.png",this.notifi.presentToast(`impossible de telecharger l'image ${t}`,"danger")})})}}noImageLoad(){let t=this._src;console.log("error find this",this._src),t.split("/").pop().split("?").shift(),this.platform.is("electron")&&(this._src="",setTimeout(()=>{},6e3)),(this.platform.is("desktop")||this.platform.is("android"))&&(this._src="../../assets/noimage.png"),this.platform.is("android")&&(this._src="../../assets/noimage.png")}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(o.t4),s.Y36(r.v),s.Y36(c.$),s.Y36(n.g))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-cache-image"]],inputs:{spinner:"spinner",isLoad:"isLoad",src:"src"},decls:3,vars:2,consts:[["style","width: 100%; height: 150px; margin: auto",3,"src","ionError",4,"ngIf","ngIfElse"],["loading",""],[2,"width","100%","height","150px","margin","auto",3,"src","ionError"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"],["animated","",2,"width","50%","height","150px","margin","auto"]],template:function(t,e){if(1&t&&(s.YNc(0,d,1,1,"ion-img",0),s.YNc(1,u,2,2,"ng-template",null,1,s.W1O)),2&t){const t=s.MAs(2);s.Q6J("ngIf",""!=e._src)("ngIfElse",t)}},directives:[a.O5,o.Xz,o.PQ,o.CK],styles:[""]}),t})()},3685:(t,e,i)=>{"use strict";i.d(e,{E:()=>m});var s=i(4762),o=i(1572),r=i(8158),c=i(731),n=i(1064),a=i(2874),d=i(1714),l=i(4375),h=i(1511);function u(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"ion-checkbox",7),o.NdJ("ionChange",function(){o.CHM(t);const e=o.oxw().$implicit;return o.oxw().selectProduct(e)}),o.qZA()}}function p(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"ion-checkbox",8),o.NdJ("ionChange",function(){o.CHM(t);const e=o.oxw().$implicit;return o.oxw().selectProduct(e)}),o.qZA()}}function g(t,e){if(1&t&&(o.TgZ(0,"ion-item"),o.TgZ(1,"ion-label"),o._uU(2),o.qZA(),o.YNc(3,u,1,0,"ion-checkbox",5),o.YNc(4,p,1,0,"ion-checkbox",6),o.qZA()),2&t){const t=e.$implicit;o.xp6(2),o.Oqu(t.name),o.xp6(1),o.Q6J("ngIf",t.isChecked),o.xp6(1),o.Q6J("ngIf",!t.isChecked)}}let m=(()=>{class t{constructor(t,e,i,s,o,r,c){this.modalController=t,this.translateConfigService=e,this.translate=i,this.notification=s,this.gammeService=o,this.notifi=r,this.random=c}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){let t=this.gammeService.getProducts(),e=this.random.getStoreId();console.log("storeId here",e),t&&t.length?(console.log("liste take",t),this.productTab=t):(this.notifi.presentLoading(),yield this.gammeService.getProductService(),this.productTab=this.gammeService.getProducts(),this.notifi.dismissLoading()),this.productTab=this.productTab.filter(t=>t.storeId==e),this.productTab=this.productTab.sort((t,e)=>t.name>e.name?1:-1),this.product=this.gammeService.getGamme(),this.productClone=this.gammeService.getGamme().productList,this.checkIfSelect()})}closeModal(){this.notification.presentLoading(),this.product.productList=this.productClone,this.productTab.forEach(t=>{t.isChecked=!1}),this.notification.dismissLoading(),this.modalController.dismiss({cancel:!0})}saveAndCloseModal(){this.notification.presentLoading(),this.gammeService.setGamme(this.product),this.productTab.forEach(t=>{t.isChecked=!1}),this.notification.dismissLoading(),this.modalController.dismiss()}selectProduct(t){t.isChecked?(t.isChecked=!1,this.product.removeToProductList(t),this.gammeService.removeToProducList(t)):(t.isChecked=!0,t.toRemove=1,this.product.addToProductList(t),this.gammeService.saveToAddProductList(t))}checkIfSelect(){this.product.productList.length?(this.product.productList.forEach(t=>{this.productTab.forEach(e=>{e._id==t._id&&(e.isChecked=!0)})}),this.productTab.forEach(t=>{t.isChecked||(t.isChecked=!1)})):this.productTab.forEach(t=>{t.isChecked=!1})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(r.IN),o.Y36(c.w),o.Y36(n.sK),o.Y36(a.g),o.Y36(d.K),o.Y36(a.g),o.Y36(l.i))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-product-for-gamme"]],decls:14,vars:7,consts:[["slot","end"],["size","small","fill","outline","color","primary",3,"click"],["size","small","fill","outline","color","danger",3,"click"],["slot","icon-only","name","close"],[4,"ngFor","ngForOf"],["checked","true","slot","end",3,"ionChange",4,"ngIf"],["slot","end",3,"ionChange",4,"ngIf"],["checked","true","slot","end",3,"ionChange"],["slot","end",3,"ionChange"]],template:function(t,e){1&t&&(o.TgZ(0,"ion-header"),o.TgZ(1,"ion-toolbar"),o._UZ(2,"ion-title"),o.TgZ(3,"ion-buttons",0),o.TgZ(4,"ion-button",1),o.NdJ("click",function(){return e.saveAndCloseModal()}),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.TgZ(7,"ion-button",2),o.NdJ("click",function(){return e.closeModal()}),o._uU(8),o.ALo(9,"translate"),o._UZ(10,"ion-icon",3),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(11,"ion-content"),o.TgZ(12,"ion-list"),o.YNc(13,g,5,3,"ion-item",4),o.qZA(),o.qZA()),2&t&&(o.xp6(5),o.hij(" ",o.lcZ(6,3,"MENU.save")," "),o.xp6(3),o.hij(" ",o.lcZ(9,5,"MENU.cancel")," "),o.xp6(5),o.Q6J("ngForOf",e.productTab))},directives:[r.Gu,r.sr,r.wd,r.Sm,r.YG,r.gu,r.W2,r.q_,h.sg,r.Ie,r.Q$,h.O5,r.nz,r.w],pipes:[n.X$],styles:[""]}),t})()},2034:(t,e,i)=>{"use strict";i.d(e,{R:()=>s});class s{constructor(t,e,i,s,o){this.removeProductList=[],this.addProductList=[],this._id="",this.desabled=!1,this.nbr=0,this.quantityToSale=1,this.productType="Gamme",this.url=" ",this.originalname="",this.filename="",this.newUrl="",this.remove=!1,this.nbrRandom=0,this.name=t,this.productList=e,this.sellingPrice=i,this._id=s,this.adminId=localStorage.getItem("adminId"),this.created=o||Date.now()}addToProductList(t){this.productList.find(e=>e._id==t._id)?console.log("existe deja"):(this.productList.push(t),console.log("resultat==>",this.productList))}removeToProductList(t,e){this.productList=this.productList.filter(e=>e._id!==t._id)}getProductList(){return this.productList}}},3764:(t,e,i)=>{"use strict";i.d(e,{n:()=>r});var s=i(1572),o=i(2874);let r=(()=>{class t{constructor(t){this.notifi=t}groupArticles(t,e){return new Promise((i,s)=>{e&&this.notifi.presentLoading();let o=[],r=t.reduce((t,e)=>(t[e.categoryName]=[...t[e.categoryName]||[],e],t),{});for(const t in r)o.push(r[t]);e&&this.notifi.dismissLoading(),i(o)})}groupByCustomerId(t){return new Promise((e,i)=>{let s=[],o=t.reduce((t,e)=>(t[e.customerId]=[...t[e.customerId]||[],e],t),{});for(const t in o)s.push(o[t]);e(s)})}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(o.g))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},4418:(t,e,i)=>{"use strict";i.d(e,{W:()=>a});var s=i(1344),o=i.n(s),r=i(8512),c=i(1572),n=i(2968);let a=(()=>{class t{constructor(t){this.urlService=t,this.mysocket=new r.X(null),this.sock=!1,this.takeUrl()}takeUrl(){console.log("je demmare ici url"),this.urlService.getUrl().subscribe(t=>{this.url=t,this.adminId=localStorage.getItem("adminId"),this.sockets=o()(this.url),this.mysocket.next(this.sockets)})}getSocket(){return this.mysocket}disconnectSocket(){this.sockets.disconnect()}getMySocket(){return this.sockets}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(n.i))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},1044:(t,e,i)=>{"use strict";i.d(e,{n:()=>c});var s=i(4762),o=i(1572),r=i(9719);let c=(()=>{class t{constructor(t){this.getStoreName=t}rangeProductByStore(t){return new Promise((e,i)=>{let o=t.reduce((t,e)=>(t[e.storeId]=[...t[e.storeId]||[],e],t),{}),r=[];for(const t in o)r.push(o[t]);r.forEach(t=>(0,s.mG)(this,void 0,void 0,function*(){let e=yield this.getStoreName.takeName(t);t.storeName=e})),e(r)})}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(r.$))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},8684:(t,e,i)=>{"use strict";i.d(e,{f:()=>o});var s=i(1572);let o=(()=>{class t{constructor(){}converToRetailerPrice(t,e){return new Promise((i,s)=>{let o=[];t.forEach(t=>{e.forEach(e=>{t.productId&&e.productId?e.productId==t.productId&&(console.log("valid"),e.retailerPrice=t.retailerPrice,e.sellingPrice=t.retailerPrice,e.purchasingPrice=t.retailerPrice,e.sellingPackPrice=t.retailerPrice*e.packSize,e.packPrice=t.retailerPrice*e.packSize,o.push(e)):e._id==t._id&&(console.log("valid"),e.retailerPrice=t.retailerPrice,e.sellingPrice=t.retailerPrice,e.purchasingPrice=t.retailerPrice,e.sellingPackPrice=t.retailerPrice*e.packSize,e.packPrice=t.retailerPrice*e.packSize,o.push(e))})}),i(o)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);