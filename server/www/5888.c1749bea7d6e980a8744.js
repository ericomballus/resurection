(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[5888],{5888:(t,e,o)=>{"use strict";o.r(e),o.d(e,{VendorRetailerProductsPageModule:()=>b});var n=o(1511),r=o(6073),i=o(8158),s=o(8777),a=o(4762),c=o(1572),l=o(3400),d=o(4144),p=o(1064),g=o(731);function u(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-item",8),c.TgZ(1,"ion-thumbnail",10),c._UZ(2,"img",11),c.qZA(),c.TgZ(3,"ion-input",12),c.NdJ("ionChange",function(o){c.CHM(t);const n=e.$implicit;return c.oxw(2).getValue(o,n)}),c.qZA(),c.TgZ(4,"ion-label"),c.TgZ(5,"p",13),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.s9C("src",t.url,c.LSH),c.xp6(4),c.AsE(" ",c.lcZ(7,3,"MENU.in_stock"),": ",t.cassier?t.cassier:0," cassier ")}}function h(t,e){if(1&t&&(c.TgZ(0,"ion-list",8),c.YNc(1,u,8,5,"ion-item",9),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.productsItem)}}const f=[{path:"",component:(()=>{class t{constructor(t,e,o,n,r,i,s,a){this.vendorService=t,this.restApi=e,this.translate=o,this.translateConfigService=n,this.restApiService=r,this.router=i,this.loadingController=s,this.alertController=a,this.vendorProduct=[],this.productsItem=[],this.randomObj={},this.totalItems=0,this.totalPrice=0,this.products=[],this.packs=[]}languageChanged(){console.log("lang shop page");let t=localStorage.getItem("language");t&&this.translateConfigService.setLanguage(t)}ngOnInit(){this.languageChanged();let t=[],e=[];this.vendorProduct=this.vendorService.getProducts(),console.log(this.vendorProduct),this.retailer=this.vendorService.getData(),console.log(this.retailer),this.restApi.vendorGetRetailerProductsItems(this.retailer.retailerId._id).subscribe(o=>{console.log(o),t=o.docs,this.vendorProduct.forEach(o=>{t.forEach(t=>{if(t.maeriId===o.maeriId){let o=parseInt(t.quantityItems)/parseInt(t.packSize)+parseInt(t.quantityStore)/parseInt(t.packSize);t.cassier=parseInt(o.toString()),t.btls=o%parseInt(t.packSize),e.push(t)}})}),this.productsItem=e})}orderProposal(t){}getValue(t,e){return(0,a.mG)(this,void 0,void 0,function*(){let o=parseInt(t.target.value),n=e._id,r=o;if(console.log(r),r>=0){this.randomObj[n]?(delete this.randomObj[n],r?this.randomObj[n]=e.packPrice?{sale:r,coast:r*parseInt(e.packPrice),prod:e,item:e,qty:r,price:r*parseInt(e.packPrice)}:{sale:r,coast:0,prod:e}:console.log("no nbr")):e.packPrice?(this.randomObj[n]={sale:r,coast:r*parseInt(e.packPrice),prod:e,item:e,qty:r,price:r*parseInt(e.packPrice)},e.fisrtValueAdd=r):this.randomObj[n]={sale:r,coast:0,prod:e};let t=Object.keys(this.randomObj);for(const e of t)this.randomObj[e].prod.removeQuantity=this.randomObj[e].sale;console.log(this.randomObj),console.log(this.generateArray(this.randomObj));let o=this.generateArray(this.randomObj);this.totalItems=0,this.totalPrice=0,o.forEach(t=>{this.totalItems=this.totalItems+t.qty,this.totalPrice=this.totalPrice+t.coast})}else t.target.value=""})}generateArray(t){const e=[];for(var o in t)e.push(t[o]);return this.cart=e,e}openCart(){this.vendorService.setCart(this.cart),this.router.navigateByUrl("/vendor-order-proposal")}displayOrders(){}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(l.A),c.Y36(d.e),c.Y36(p.sK),c.Y36(g.w),c.Y36(d.e),c.Y36(s.F0),c.Y36(i.HT),c.Y36(i.Br))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-vendor-retailer-products"]],decls:15,vars:5,consts:[["slot","start"],["defaultHref","/vendor-retailer-list"],["slot","end"],[3,"disabled","click"],["color","dark","slot","end","name","cart"],["size-sm","12","size-md","12","size-xm","12","size-lg","12",1,"ion-align-self-center",3,"ngClass"],[1,"ion-text-center","ion-text-uppercase","taille",3,"click"],["lines","full",4,"ngIf"],["lines","full"],["lines","full",4,"ngFor","ngForOf"],["slot","start",1,"thumbnailM"],[3,"src"],["slot","end","placeholder","Entrer commande","type","number","debounce","1500",3,"ionChange"],[1,"instock"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c._UZ(3,"ion-back-button",1),c.qZA(),c.TgZ(4,"ion-buttons",2),c.TgZ(5,"ion-button",3),c.NdJ("click",function(){return e.openCart()}),c.TgZ(6,"ion-badge",2),c._uU(7),c.qZA(),c._UZ(8,"ion-icon",4),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"ion-content"),c.TgZ(10,"ion-row"),c.TgZ(11,"ion-col",5),c.TgZ(12,"div",6),c.NdJ("click",function(){return e.displayOrders()}),c._uU(13),c.qZA(),c.qZA(),c.qZA(),c.YNc(14,h,2,1,"ion-list",7),c.qZA()),2&t&&(c.xp6(5),c.Q6J("disabled",!e.totalPrice),c.xp6(2),c.Oqu(e.totalItems),c.xp6(4),c.Q6J("ngClass","separationBlock"),c.xp6(2),c.hij(" stock ",e.retailer.retailerId.company," "),c.xp6(1),c.Q6J("ngIf",e.productsItem))},directives:[i.Gu,i.sr,i.Sm,i.oU,i.cs,i.YG,i.yp,i.gu,i.W2,i.Nd,i.wI,n.mk,n.O5,i.q_,n.sg,i.Ie,i.Bs,i.pK,i.as,i.Q$],pipes:[p.X$],styles:[".instock[_ngcontent-%COMP%], .instore[_ngcontent-%COMP%]{font-size:60%;font-weight:700}.instore[_ngcontent-%COMP%]{color:#1c74f7}.btnWarehouse[_ngcontent-%COMP%]{font-size:50%}.stock-alert[_ngcontent-%COMP%]{--ion-background-color:#f85252;--color:#fff;opacity:.9}.stock-alert[_ngcontent-%COMP%]   .instock[_ngcontent-%COMP%], .stock-alert[_ngcontent-%COMP%]   .instore[_ngcontent-%COMP%]{color:#fff}.stock-alert[_ngcontent-%COMP%]   .btnWarehouse[_ngcontent-%COMP%]{--border-color:#000;--color:#000}.confirm[_ngcontent-%COMP%]{padding:0;color:red;font-size:10px}.divG[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.thumbnailM[_ngcontent-%COMP%], ion-thumbnail[_ngcontent-%COMP%]{height:50px;width:50px}.separationBlock[_ngcontent-%COMP%]{background-color:#494848;color:#fff;padding:15px;margin-top:15px}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[s.Bz.forChild(f)],s.Bz]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.ez,r.u5,i.Pc,m,p.aw.forChild()]]}),t})()}}]);