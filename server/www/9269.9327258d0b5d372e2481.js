(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[9269],{9269:(e,t,i)=>{"use strict";i.r(t),i.d(t,{CompanyPageModule:()=>C});var n=i(1511),o=i(6073),a=i(8777),s=i(8158),r=i(4762),c=i(8876),u=i(1572),g=i(1004),l=i(5946),h=i(6863),p=i(731),m=i(1064),d=i(4375);function Z(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ion-button",3),u.NdJ("click",function(){return u.CHM(e),u.oxw().save()}),u._UZ(1,"ion-icon",23),u._uU(2),u.ALo(3,"translate"),u.qZA()}2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"MENU.save")," "))}function _(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ion-button",3),u.NdJ("click",function(){return u.CHM(e),u.oxw().update()}),u._UZ(1,"ion-icon",23),u._uU(2),u.ALo(3,"translate"),u.qZA()}2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"MENU.save")," "))}function f(e,t){if(1&e&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.companyName)}}function A(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ion-item"),u._UZ(1,"ion-icon",10),u.TgZ(2,"ion-label",19),u.TgZ(3,"h2"),u._uU(4,"Paiement Mobile:"),u.qZA(),u.qZA(),u.TgZ(5,"ion-input",24),u.NdJ("ngModelChange",function(t){return u.CHM(e),u.oxw().phonePaiement=t}),u.qZA(),u.TgZ(6,"ion-button",25),u.NdJ("click",function(){return u.CHM(e),u.oxw().getPhoneList()}),u._uU(7,"valider"),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(5),u.Q6J("ngModel",e.phonePaiement),u.xp6(1),u.Q6J("disabled",!e.phonePaiement)}}function x(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ion-item"),u.TgZ(1,"ion-label"),u._uU(2),u.qZA(),u.TgZ(3,"ion-button",27),u.NdJ("click",function(){u.CHM(e);const i=t.$implicit,n=t.index;return u.oxw(2).removeToPhoneList(i,n)}),u._uU(4,"Delete"),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit;u.xp6(2),u.AsE("",e.name," Tel: ",e.telephone,"")}}function T(e,t){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"ion-list"),u.YNc(2,x,5,2,"ion-item",26),u.qZA(),u.qZA()),2&e){const e=u.oxw();u.xp6(2),u.Q6J("ngForOf",e.phoneList)}}function q(e,t){if(1&e&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.companyMail)}}function v(e,t){if(1&e&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.ip)}}function b(e,t){if(1&e&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.macServer)}}function N(e,t){if(1&e&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.stock_min)}}function M(e,t){if(1&e&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.entete_facture)}}function y(e,t){if(1&e&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Oqu(e.pied_facture)}}function U(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ion-item"),u.TgZ(1,"ion-label",11),u.TgZ(2,"h2"),u._uU(3,"Taxe covid"),u.qZA(),u.qZA(),u.TgZ(4,"ion-input",9),u.NdJ("ngModelChange",function(t){return u.CHM(e),u.oxw().taxe_covid=t}),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(4),u.Q6J("ngModel",e.taxe_covid)}}function S(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ion-item"),u.TgZ(1,"ion-label",11),u.TgZ(2,"h2"),u._uU(3,"Taxe phytosanitaire"),u.qZA(),u.qZA(),u.TgZ(4,"ion-input",9),u.NdJ("ngModelChange",function(t){return u.CHM(e),u.oxw().taxe_phyto=t}),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(4),u.Q6J("ngModel",e.taxe_phyto)}}function k(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"ion-item"),u.TgZ(1,"ion-label",11),u.TgZ(2,"h2"),u._uU(3,"Surcharge Carburant"),u.qZA(),u.qZA(),u.TgZ(4,"ion-input",9),u.NdJ("ngModelChange",function(t){return u.CHM(e),u.oxw().surcharge_carburant=t}),u.qZA(),u.qZA()}if(2&e){const e=u.oxw();u.xp6(4),u.Q6J("ngModel",e.surcharge_carburant)}}const J=[{path:"",component:(()=>{class e{constructor(e,t,i,n,o,a,s,r,c){this.geolocation=e,this.adminService=t,this.toastController=i,this.formBuilder=n,this.printerService=o,this.translateConfigService=a,this.translate=s,this.modalController=r,this.random=c,this.lat=0,this.lng=0,this.stock_min=0,this.check=!1,this.resource=!1,this.wifi=!1,this.manageStockWithService=!1,this.register_customer=!1,this.use_bonus=!1,this.phonePaiement=0,this.phoneList=[],this.operatorName="",this.taxe_covid=0,this.taxe_phyto=0,this.surcharge_carburant=0,this.getSetting(),this.storeType=JSON.parse(localStorage.getItem("user"))[0].storeType,console.log(this.storeType)}ngOnInit(){this.selectedLanguage=this.translateConfigService.getDefaultLanguage(),this.fileUploadForm=this.formBuilder.group({uploadedImage:[""],pied_page:[""]}),console.log(this.random.getSetting()),this.setting=this.random.getSetting()}languageChanged(){this.translateConfigService.setLanguage(this.selectedLanguage)}save(){let e={latitude:this.lat,longitude:this.lng,name:this.companyName,companyMail:this.companyMail,phoneNumber:this.phoneNumber,entete_facture:this.entete_facture,pied_facture:this.pied_facture,ip:this.ip,stock_min:parseInt(this.stock_min),stock_min_aut:parseInt(this.stock_min_aut),macServer:this.macServer,use_resource:this.resource,manageStockWithService:this.manageStockWithService,register_customer:this.register_customer,use_bonus:this.use_bonus,taxe_phyto:this.taxe_phyto,taxe_covid:this.taxe_covid,surcharge_carburant:this.surcharge_carburant};this.adminService.postCompanySetting(e).subscribe(e=>{console.log(e),this.presentToast()})}update(){return(0,r.mG)(this,void 0,void 0,function*(){let e=localStorage.getItem("adminId"),t={};if(this.phoneList.length&&(t.phoneList=this.phoneList),this.taxe_covid&&(t.taxe_covid=this.taxe_covid),this.taxe_phyto&&(t.taxe_phyto=this.taxe_phyto),this.stock_min_aut?(parseInt(this.stock_min_aut),t={latitude:this.lat,longitude:this.lng,name:this.companyName,companyMail:this.companyMail,phoneNumber:this.phoneNumber,ip:this.ip,_id:this.companyId,stock_min:parseInt(this.stock_min),stock_min_aut:parseInt(this.stock_min_aut),macServer:this.macServer,entete_facture:this.entete_facture,pied_facture:this.pied_facture,use_resource:this.resource,use_wifi:this.wifi,manageStockWithService:this.manageStockWithService,adminId:e,register_customer:this.register_customer,use_bonus:this.use_bonus,phoneList:this.phoneList,taxe_phyto:this.taxe_phyto,taxe_covid:this.taxe_covid,surcharge_carburant:this.surcharge_carburant}):t={latitude:this.lat,longitude:this.lng,name:this.companyName,companyMail:this.companyMail,phoneNumber:this.phoneNumber,ip:this.ip,_id:this.companyId,stock_min:parseInt(this.stock_min),macServer:this.macServer,entete_facture:this.entete_facture,pied_facture:this.pied_facture,use_resource:this.resource,use_wifi:this.wifi,manageStockWithService:this.manageStockWithService,adminId:e,register_customer:this.register_customer,use_bonus:this.use_bonus,phoneList:this.phoneList,taxe_phyto:this.taxe_phyto,taxe_covid:this.taxe_covid,surcharge_carburant:this.surcharge_carburant},this.pied_page){const i=new FormData;i.append("uploadedImage",this.fileUploadForm.get("pied_page").value),i.append("agentId","008");let n=`custumerlogo/${e}?db=${e}`,o=yield this.adminService.postLogoPromise(i,n);console.log("voici le pied de page ici ===>",o),t.pied_page=o.url}if(this.file){const i=new FormData;i.append("uploadedImage",this.fileUploadForm.get("uploadedImage").value),i.append("agentId","007");let n=`custumerlogo/${e}?db=${e}`,o=yield this.adminService.postLogoPromise(i,n);console.log("voici entete page ici===>",o),t.logo=o.url}this.adminService.updateCompanySetting(t).subscribe(e=>{if(e.company.length){this.check=!0;let t=e.company[0];this.lat=t.latitude,this.lng=t.longitude,this.companyName=t.name,this.phoneNumber=t.phoneNumber,this.ip=t.ip,this.companyId=t._id,this.stock_min=t.stock_min,this.stock_min_aut=t.stock_min_aut,this.macServer=t.macServer,this.entete_facture=t.entete_facture,this.pied_facture=t.pied_facture,this.resource=t.use_resource,this.wifi=t.use_wifi,this.companyMail=t.companyMail,this.manageStockWithService=t.manageStockWithService,this.logo=t.logo,this.register_customer=t.register_customer,this.use_bonus=t.use_bonus}this.presentToast(),this.printerService.download(t.logo)})})}getLocation(){this.geolocation.getCurrentPosition({maximumAge:1e3,timeout:5e3,enableHighAccuracy:!0}).then(e=>{this.lat=e.coords.latitude,this.lng=e.coords.longitude},e=>{alert("Can not retrieve Location")}).catch(e=>{alert("Error getting location - "+JSON.stringify(e))})}getSetting(){this.adminService.getCompanySetting().subscribe(e=>{if(console.log(e),e.company.length){this.check=!0;let t=e.company[0];this.lat=t.latitude,this.lng=t.longitude,this.companyName=t.name,this.phoneNumber=t.phoneNumber,this.ip=t.ip,this.companyId=t._id,this.stock_min=t.stock_min,this.stock_min_aut=t.stock_min_aut,this.macServer=t.macServer,this.resource=t.use_resource,this.companyMail=t.companyMail,this.manageStockWithService=t.manageStockWithService,t.register_customer&&(this.register_customer=t.register_customer),t.use_bonus&&(this.use_bonus=t.use_bonus),t.logo&&(this.url=t.logo),t.phoneList&&t.phoneList.length&&(this.phoneList=t.phoneList),t.taxe_covid&&(this.taxe_covid=t.taxe_covid),t.taxe_phyto&&(this.taxe_phyto=t.taxe_phyto),t.surcharge_carburant&&(this.surcharge_carburant=t.surcharge_carburant)}})}presentToast(){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Your settings have been saved.",position:"top",duration:2e3})).present()})}enableResource(){this.resource=!this.resource,console.log(this.resource)}enableGestionStock(){this.manageStockWithService=!this.manageStockWithService}enableWifi(){this.wifi=!this.wifi,console.log(this.wifi)}readUrl(e){this.file=e.target.files[0];const t=e.target.files[0];if(this.fileUploadForm.get("uploadedImage").setValue(t),e.target.files&&e.target.files[0]){var i=new FileReader;i.onload=e=>{this.url=e.target.result},i.readAsDataURL(e.target.files[0])}}readUrlPiedPage(e){if(this.pied_page=e.target.files[0],console.log(e.target.files[0]),this.fileUploadForm.get("pied_page").setValue(e.target.files[0]),e.target.files&&e.target.files[0]){var t=new FileReader;t.onload=e=>{this.url=e.target.result},t.readAsDataURL(e.target.files[0])}}autoriseEnregistrementClient(){}getPhoneList(){console.log(this.phonePaiement),this.phoneList.push({name:this.operatorName,telephone:this.phonePaiement}),this.phonePaiement=0}typeDePaiment(e){"ORANGE MONEY"!=e.detail.value&&"MTN MONEY"!=e.detail.value||(this.operatorName=e.detail.value)}removeToPhoneList(e,t){this.phoneList.splice(t,1)}goToZonePage(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:c.G,componentProps:{}});return e.onDidDismiss().then(e=>{}),yield e.present()})}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(g.b),u.Y36(l.l),u.Y36(s.yF),u.Y36(o.qu),u.Y36(h.v),u.Y36(p.w),u.Y36(m.sK),u.Y36(s.IN),u.Y36(d.i))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-company"]],decls:111,vars:50,consts:[["slot","start"],["autoHide","false"],["slot","end"],["expand","block","fill","clear",3,"click"],["expand","block","fill","clear",3,"click",4,"ngIf"],["padding",""],["slot","start","name","pricetag"],["position","floating"],[4,"ngIf"],[3,"ngModel","ngModelChange"],["slot","start","name","call"],["position","floating",1,"ion-text-wrap"],["slot","start","name","man-outline"],["value","CASH","interface","popover",3,"ionChange"],["value","ORANGE MONEY"],["value","MTN MONEY"],["slot","start","name","mail"],["slot","start","name","print"],["slot","start","name","stopwatch"],[1,"ion-text-wrap"],["slot","end",3,"ngModel","ngModelChange","ionChange"],["slot","start","name","build"],["name","image","type","file","ngModel","","required","",3,"change"],["slot","end","name","save"],["type","tel","name","telephone",3,"ngModel","ngModelChange"],["size","small",3,"disabled","click"],[4,"ngFor","ngForOf"],["color","danger","size","small",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-title"),u._uU(3,"company"),u.qZA(),u.TgZ(4,"ion-buttons",0),u._UZ(5,"ion-menu-button",1),u.qZA(),u.TgZ(6,"ion-buttons",2),u.TgZ(7,"ion-button",3),u.NdJ("click",function(){return t.goToZonePage()}),u._uU(8,"Zone Expedition"),u.qZA(),u.YNc(9,Z,4,3,"ion-button",4),u.YNc(10,_,4,3,"ion-button",4),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"ion-content",5),u.TgZ(12,"ion-list"),u.TgZ(13,"ion-list-header"),u._uU(14),u.ALo(15,"translate"),u.qZA(),u.TgZ(16,"ion-item"),u._UZ(17,"ion-icon",6),u.TgZ(18,"ion-label",7),u.TgZ(19,"h2"),u._uU(20),u.ALo(21,"translate"),u.qZA(),u.YNc(22,f,2,1,"p",8),u.qZA(),u.TgZ(23,"ion-input",9),u.NdJ("ngModelChange",function(e){return t.companyName=e}),u.qZA(),u.qZA(),u.TgZ(24,"ion-item"),u._UZ(25,"ion-icon",10),u.TgZ(26,"ion-label",11),u.TgZ(27,"h2"),u._uU(28),u.ALo(29,"translate"),u.qZA(),u.TgZ(30,"p"),u._uU(31,"pas de signe +, EX: 237691087025"),u.qZA(),u.qZA(),u.TgZ(32,"ion-input",9),u.NdJ("ngModelChange",function(e){return t.phoneNumber=e}),u.qZA(),u.qZA(),u.TgZ(33,"ion-item"),u._UZ(34,"ion-icon",12),u.TgZ(35,"ion-label"),u._uU(36,"Type de paiement"),u.qZA(),u.TgZ(37,"ion-select",13),u.NdJ("ionChange",function(e){return t.typeDePaiment(e)}),u.TgZ(38,"ion-select-option",14),u._uU(39,"ORANGE MONEY"),u.qZA(),u.TgZ(40,"ion-select-option",15),u._uU(41,"MTN MONEY"),u.qZA(),u.qZA(),u.qZA(),u.YNc(42,A,8,2,"ion-item",8),u.YNc(43,T,3,1,"div",8),u.TgZ(44,"ion-item"),u._UZ(45,"ion-icon",16),u.TgZ(46,"ion-label",11),u.TgZ(47,"h2"),u._uU(48,"E-mail"),u.qZA(),u.YNc(49,q,2,1,"p",8),u.qZA(),u.TgZ(50,"ion-input",9),u.NdJ("ngModelChange",function(e){return t.companyMail=e}),u.qZA(),u.qZA(),u.TgZ(51,"ion-item"),u._UZ(52,"ion-icon",17),u.TgZ(53,"ion-label",11),u.TgZ(54,"h2"),u._uU(55),u.ALo(56,"translate"),u.qZA(),u.YNc(57,v,2,1,"p",8),u.qZA(),u.TgZ(58,"ion-input",9),u.NdJ("ngModelChange",function(e){return t.ip=e}),u.qZA(),u.qZA(),u.TgZ(59,"ion-item"),u._UZ(60,"ion-icon",17),u.TgZ(61,"ion-label",11),u.TgZ(62,"h2"),u._uU(63),u.ALo(64,"translate"),u.qZA(),u.YNc(65,b,2,1,"p",8),u.qZA(),u.TgZ(66,"ion-input",9),u.NdJ("ngModelChange",function(e){return t.macServer=e}),u.qZA(),u.qZA(),u.TgZ(67,"ion-item"),u._UZ(68,"ion-icon",18),u.TgZ(69,"ion-label",11),u.TgZ(70,"h2"),u._uU(71),u.ALo(72,"translate"),u.qZA(),u.YNc(73,N,2,1,"p",8),u.qZA(),u.TgZ(74,"ion-input",9),u.NdJ("ngModelChange",function(e){return t.stock_min=e}),u.qZA(),u.qZA(),u.TgZ(75,"ion-item"),u._UZ(76,"ion-icon",12),u.TgZ(77,"ion-label",19),u.TgZ(78,"h2"),u._uU(79),u.ALo(80,"translate"),u.qZA(),u.qZA(),u.TgZ(81,"ion-checkbox",20),u.NdJ("ngModelChange",function(e){return t.register_customer=e})("ionChange",function(){return t.autoriseEnregistrementClient()}),u.qZA(),u.qZA(),u.TgZ(82,"ion-item"),u._UZ(83,"ion-icon",21),u.TgZ(84,"ion-label",11),u.TgZ(85,"h2"),u._uU(86),u.ALo(87,"translate"),u.qZA(),u.YNc(88,M,2,1,"p",8),u.qZA(),u.TgZ(89,"ion-input",9),u.NdJ("ngModelChange",function(e){return t.entete_facture=e}),u.qZA(),u.qZA(),u.TgZ(90,"ion-item"),u._UZ(91,"ion-icon",21),u.TgZ(92,"ion-label",11),u.TgZ(93,"h2"),u._uU(94),u.ALo(95,"translate"),u.qZA(),u.YNc(96,y,2,1,"p",8),u.qZA(),u.TgZ(97,"ion-input",9),u.NdJ("ngModelChange",function(e){return t.pied_facture=e}),u.qZA(),u.qZA(),u.TgZ(98,"ion-item"),u.TgZ(99,"ion-label",19),u.TgZ(100,"h2"),u._uU(101,"logo company:"),u.qZA(),u.qZA(),u.TgZ(102,"ion-input",22),u.NdJ("change",function(e){return t.readUrl(e)}),u.qZA(),u.qZA(),u.TgZ(103,"ion-item"),u.TgZ(104,"ion-label",19),u.TgZ(105,"h2"),u._uU(106,"logo pied de page:"),u.qZA(),u.qZA(),u.TgZ(107,"ion-input",22),u.NdJ("change",function(e){return t.readUrlPiedPage(e)}),u.qZA(),u.qZA(),u.YNc(108,U,5,1,"ion-item",8),u.YNc(109,S,5,1,"ion-item",8),u.YNc(110,k,5,1,"ion-item",8),u.qZA(),u.qZA()),2&e&&(u.xp6(9),u.Q6J("ngIf",!t.check),u.xp6(1),u.Q6J("ngIf",t.check),u.xp6(4),u.Oqu(u.lcZ(15,32,"MENU.settings")),u.xp6(6),u.Oqu(u.lcZ(21,34,"MENU.name")),u.xp6(2),u.Q6J("ngIf",t.companyName),u.xp6(1),u.Q6J("ngModel",t.companyName),u.xp6(5),u.Oqu(u.lcZ(29,36,"MENU.phone")),u.xp6(4),u.Q6J("ngModel",t.phoneNumber),u.xp6(10),u.Q6J("ngIf",t.operatorName),u.xp6(1),u.Q6J("ngIf",t.phoneList.length),u.xp6(6),u.Q6J("ngIf",t.companyMail),u.xp6(1),u.Q6J("ngModel",t.companyMail),u.xp6(5),u.hij("",u.lcZ(56,38,"MENU.printer")," ip@"),u.xp6(2),u.Q6J("ngIf",t.ip),u.xp6(1),u.Q6J("ngModel",t.ip),u.xp6(5),u.hij("",u.lcZ(64,40,"MENU.localserver")," @mac"),u.xp6(2),u.Q6J("ngIf",t.macServer),u.xp6(1),u.Q6J("ngModel",t.macServer),u.xp6(5),u.Oqu(u.lcZ(72,42,"MENU.stock_alert")),u.xp6(2),u.Q6J("ngIf",t.ip),u.xp6(1),u.Q6J("ngModel",t.stock_min),u.xp6(5),u.Oqu(u.lcZ(80,44,"MENU.register_customer")),u.xp6(2),u.Q6J("ngModel",t.register_customer),u.xp6(5),u.hij("",u.lcZ(87,46,"MENU.invoice_header"),":"),u.xp6(2),u.Q6J("ngIf",t.entete_facture),u.xp6(1),u.Q6J("ngModel",t.entete_facture),u.xp6(5),u.hij("",u.lcZ(95,48,"MENU.invoice_footer"),":"),u.xp6(2),u.Q6J("ngIf",t.pied_facture),u.xp6(1),u.Q6J("ngModel",t.pied_facture),u.xp6(11),u.Q6J("ngIf",t.setting&&t.setting.ship_packages),u.xp6(1),u.Q6J("ngIf",t.setting&&t.setting.ship_packages),u.xp6(1),u.Q6J("ngIf",t.setting&&t.setting.ship_packages))},directives:[s.Gu,s.sr,s.wd,s.Sm,s.fG,s.YG,n.O5,s.W2,s.q_,s.yh,s.Ie,s.gu,s.Q$,s.pK,s.j9,o.JJ,o.On,s.t9,s.QI,s.n0,s.nz,s.w,o.Q7,n.sg],pipes:[m.X$],styles:[""]}),e})()}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[n.ez,o.u5,o.UX,s.Pc,a.Bz.forChild(J),m.aw.forChild()]]}),e})()}}]);