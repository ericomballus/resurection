(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[6243],{6243:(e,t,o)=>{"use strict";o.r(t),o.d(t,{ResourcePageModule:()=>q});var i=o(1511),n=o(6073),s=o(8777),r=o(8158),l=o(4762),c=o(1572),a=o(1611),u=o(1064);const g=["form"];function Z(e,t){if(1&e&&(c.TgZ(0,"ion-select-option",23),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e.id),c.xp6(1),c.Oqu(e.name)}}function p(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"ion-item"),c.TgZ(1,"ion-label"),c.TgZ(2,"h3"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.qZA(),c.TgZ(5,"ion-select",21),c.NdJ("ionChange",function(t){return c.CHM(e),c.oxw().changeStore(t)}),c.YNc(6,Z,2,2,"ion-select-option",22),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(3),c.Oqu(c.lcZ(4,2,"MENU.store")),c.xp6(3),c.Q6J("ngForOf",e.userStore)}}function d(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"ion-item"),c.TgZ(1,"ion-label"),c.TgZ(2,"p",25),c._uU(3),c.qZA(),c.TgZ(4,"p"),c._uU(5),c.ALo(6,"date"),c.qZA(),c.qZA(),c.TgZ(7,"ion-button",26),c.NdJ("click",function(){c.CHM(e);const o=t.$implicit;return c.oxw(2).deleteResources(o)}),c._UZ(8,"ion-icon",27),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit;c.xp6(3),c.lnq(" ",e.name," ",e.sizeUnit," ",e.unitName," "),c.xp6(2),c.Oqu(c.lcZ(6,4,e.created))}}function h(e,t){if(1&e&&(c.TgZ(0,"ion-list"),c._UZ(1,"ion-list-header"),c.YNc(2,d,9,6,"ion-item",24),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.Q6J("ngForOf",e.resources)}}const m=function(){return{standalone:!0}},f=[{path:"",component:(()=>{class e{constructor(e,t,o,i){this.resourceService=e,this.modalController=t,this.alertController=o,this.route=i,this.tabRoles=[],this.admin=!1,this.userStore=[],this.selection="piece",this.originPage="",this.tabRoles=JSON.parse(localStorage.getItem("roles")),this.tabRoles.includes(1)&&(this.getResources(),this.admin=!0,this.getStore())}ngOnInit(){this.route.queryParams.subscribe(e=>{console.log(e),this.originPage=e.page,console.log(this.originPage)})}getStore(){let e=JSON.parse(localStorage.getItem("user"));this.userStore=e[0].storeId,console.log(this.userStore)}ionViewDidEnter(){let e=JSON.parse(localStorage.getItem("user"));this.userStore=e[0].storeId}register(e){"r"==this.unitName?console.log("rien"):e.value.unitName=this.unitName,e.value.storeId=this.storeId?this.storeId:this.userStore[0].id,e.value.page=this.originPage,this.resourceService.addUserResources(e.value).subscribe(e=>{console.log(e),this.formulaire.reset(),this.selection=null,this.getResources()})}presentAlert(){return(0,l.mG)(this,void 0,void 0,function*(){const e=yield this.alertController.create({header:"MAERI",message:"success!!!!",buttons:["OK"]});yield e.present()})}getResources(){this.resourceService.getResources().subscribe(e=>{console.log(e),this.resources=e.resources.filter(e=>{if(e.page)return e.page==this.originPage})})}deleteResources(e){this.resourceService.deleteResource(e._id).subscribe(e=>{console.log(e),this.getResources()})}createCategory(){return(0,l.mG)(this,void 0,void 0,function*(){const e=yield this.alertController.create({header:"MAERI",message:"success!!!!",buttons:["OK"]});yield e.present()})}unitMeasure(e){console.log(e.target.value),this.unitName=e.target.value}changeStore(e){console.log(e.target.value),this.storeId=e.target.value}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(a.z),c.Y36(r.IN),c.Y36(r.Br),c.Y36(s.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-resource"]],viewQuery:function(e,t){if(1&e&&c.Gf(g,1,n.F),2&e){let e;c.iGM(e=c.CRH())&&(t.formulaire=e.first)}},decls:48,vars:22,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],[3,"ngSubmit"],["form","ngForm"],["color","primary","justify-content-center",""],["align-self-center","","size-md","12","size-lg","12","size-xs","12"],["padding",""],["position","floating"],["name","name","type","text","ngModel","","required",""],["name","sizeUnit","type","number","placeholder","size","ngModel","","required",""],["interface","popover",3,"ngModel","ngModelOptions","ionChange","ngModelChange"],["value","g"],["value","kg"],["value","cl"],["value","l"],["value","piece"],["name","purchasingPrice","type","number","placeholder","prix d'achat","ngModel","","required",""],[4,"ngIf"],["color","danger","size","large","type","submit","expand","block",3,"disabled"],[1,"container"],["interface","popover",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],[1,"p1"],["color","danger","slot","end","small","",3,"click"],["slot","icon-only","name","trash"]],template:function(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar",0),c.TgZ(2,"ion-buttons",1),c._UZ(3,"ion-back-button",2),c.qZA(),c.qZA(),c.qZA(),c.TgZ(4,"ion-content"),c.TgZ(5,"form",3,4),c.NdJ("ngSubmit",function(){c.CHM(e);const o=c.MAs(6);return t.register(o)}),c.TgZ(7,"ion-grid"),c.TgZ(8,"ion-row",5),c.TgZ(9,"ion-col",6),c.TgZ(10,"div",7),c.TgZ(11,"ion-item"),c.TgZ(12,"ion-label",8),c._uU(13),c.ALo(14,"translate"),c.qZA(),c._UZ(15,"ion-input",9),c.qZA(),c.TgZ(16,"ion-item"),c.TgZ(17,"ion-label",8),c._uU(18),c.ALo(19,"translate"),c.qZA(),c._UZ(20,"ion-input",10),c.qZA(),c.TgZ(21,"ion-item"),c.TgZ(22,"ion-label"),c._uU(23),c.ALo(24,"translate"),c.qZA(),c.TgZ(25,"ion-select",11),c.NdJ("ionChange",function(e){return t.unitMeasure(e)})("ngModelChange",function(e){return t.selection=e}),c.TgZ(26,"ion-select-option",12),c._uU(27,"g"),c.qZA(),c.TgZ(28,"ion-select-option",13),c._uU(29,"kg"),c.qZA(),c.TgZ(30,"ion-select-option",14),c._uU(31,"cl"),c.qZA(),c.TgZ(32,"ion-select-option",15),c._uU(33,"l"),c.qZA(),c.TgZ(34,"ion-select-option",16),c._uU(35,"piece"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(36,"ion-item"),c.TgZ(37,"ion-label",8),c._uU(38),c.ALo(39,"translate"),c.qZA(),c._UZ(40,"ion-input",17),c.qZA(),c.YNc(41,p,7,4,"ion-item",18),c.qZA(),c.TgZ(42,"div",7),c.TgZ(43,"ion-button",19),c._uU(44),c.ALo(45,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(46,"div",20),c.YNc(47,h,3,1,"ion-list",18),c.qZA(),c.qZA()}if(2&e){const e=c.MAs(6);c.xp6(3),c.s9C("defaultHref",t.originPage),c.xp6(10),c.Oqu(c.lcZ(14,11,"MENU.name")),c.xp6(5),c.Oqu(c.lcZ(19,13,"MENU.size")),c.xp6(5),c.Oqu(c.lcZ(24,15,"MENU.unit")),c.xp6(2),c.Q6J("ngModel",t.selection)("ngModelOptions",c.DdM(21,m)),c.xp6(13),c.Oqu(c.lcZ(39,17,"MENU.purchasingPirce")),c.xp6(3),c.Q6J("ngIf",t.userStore.length>1),c.xp6(2),c.Q6J("disabled",!e.valid),c.xp6(1),c.Oqu(c.lcZ(45,19,"MENU.save")),c.xp6(3),c.Q6J("ngIf",t.resources)}},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.W2,n.Y7,n.JL,n.F,r.jY,r.Nd,r.wI,r.Ie,r.Q$,r.pK,r.j9,n.JJ,n.On,n.Q7,r.as,r.t9,r.QI,r.n0,i.O5,r.YG,i.sg,r.q_,r.yh,r.gu],pipes:[u.X$,i.uU],styles:[""]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[i.ez,n.u5,r.Pc,s.Bz.forChild(f),u.aw.forChild()]]}),e})()}}]);