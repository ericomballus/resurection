(self.webpackChunkWebsite=self.webpackChunkWebsite||[]).push([[1190],{1190:(t,e,i)=>{"use strict";i.d(e,{L:()=>I});var s=i(4762),o=i(1572),r=i(8158),n=i(1044),c=i(9719),a=i(1611),u=i(4144),l=i(4375),d=i(2181),h=i(2874),p=i(6073),g=i(1511);function m(t,e){if(1&t&&(o.TgZ(0,"ion-row"),o.TgZ(1,"ion-col"),o.TgZ(2,"div",3),o._uU(3),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(3),o.Oqu(t.storeName)}}const f=function(t){return{"product-pick":t}};function v(t,e){if(1&t&&(o.TgZ(0,"div",9),o._UZ(1,"ion-icon",10),o.qZA()),2&t){const t=o.oxw().$implicit;o.Q6J("ngClass",o.VKq(1,f,!0===t.pick))}}function S(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"ion-col",4),o.TgZ(1,"ion-card",5),o.NdJ("click",function(){o.CHM(t);const i=e.$implicit;return o.oxw().pickProduct(i)}),o.YNc(2,v,2,3,"div",6),o._UZ(3,"img",7),o.TgZ(4,"ion-card-content"),o.TgZ(5,"div",8),o.TgZ(6,"small"),o._uU(7),o.qZA(),o._uU(8,"\xa0 "),o.TgZ(9,"small"),o._uU(10),o.qZA(),o.TgZ(11,"small"),o._uU(12),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=e.$implicit;o.xp6(1),o.Q6J("disabled",t.exist),o.xp6(1),o.Q6J("ngIf",t.pick),o.xp6(1),o.s9C("src",t.url,o.LSH),o.xp6(4),o.Oqu(t.name),o.xp6(3),o.Oqu(t.sizeUnit?t.sizeUnit:""),o.xp6(2),o.Oqu(t.unitName?t.unitName:"")}}let Z=(()=>{class t{constructor(t){this.saveRandom=t,this.valueChange=new o.vpe,this.tab=[1,2,3],this.title="",this.storeName=null}ngOnInit(){setTimeout(()=>{this.multiStoreProducts.storeName&&(this.storeName=this.multiStoreProducts.storeName),this.alreadyChosen()},3e3)}pickProduct(t){let e=this.saveRandom.getRetailer(),i=e.productsToSale;t.pick?(t.pick=!t.pick,i=i.filter(e=>t._id!==e._id)):(t.pick=!0,i.push(t)),e.productsToSale=i,this.saveRandom.setRetailer(e)}segmentChanged(t){}alreadyChosen(){let t=this.saveRandom.getRetailer().productsToSale;this.multiStoreProducts.forEach(e=>{let i=t.findIndex(t=>t._id==e._id);e.pick=i>=0})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(l.i))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-pick"]],inputs:{multiStoreProducts:"multiStoreProducts"},outputs:{valueChange:"valueChange"},decls:6,vars:2,consts:[["pager","true"],[4,"ngIf"],["size","12","sizeLg","3","sizeMd","4","sizeSm","6","sizeXs","6",4,"ngFor","ngForOf"],[1,"ion-text-center","ion-text-uppercase"],["size","12","sizeLg","3","sizeMd","4","sizeSm","6","sizeXs","6"],[3,"disabled","click"],[3,"ngClass",4,"ngIf"],[1,"img-container",2,"width","100px","height","100px",3,"src"],[1,"divname",2,"text-align","center"],[3,"ngClass"],["name","checkbox-outline"]],template:function(t,e){1&t&&(o.TgZ(0,"ion-slides",0),o.TgZ(1,"ion-slide"),o.TgZ(2,"ion-grid"),o.YNc(3,m,4,1,"ion-row",1),o.TgZ(4,"ion-row"),o.YNc(5,S,13,6,"ion-col",2),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(3),o.Q6J("ngIf",e.storeName),o.xp6(2),o.Q6J("ngForOf",e.multiStoreProducts))},directives:[r.Hr,r.A$,r.jY,g.O5,r.Nd,g.sg,r.wI,r.PM,r.FN,g.mk,r.gu],styles:[".product-pick[_ngcontent-%COMP%]{z-index:2;position:absolute}.product-pick[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#adff2f;font-size:25px}"]}),t})();function k(t,e){if(1&t&&(o.TgZ(0,"ion-segment-button",7),o._uU(1),o.qZA()),2&t){const t=e.$implicit;o.s9C("value",t),o.xp6(1),o.hij(" ",t," ")}}function T(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"app-pick",8),o.NdJ("valueChange",function(e){return o.CHM(t),o.oxw().IncommingItems(e)}),o.qZA()}if(2&t){const t=o.oxw();o.Q6J("multiStoreProducts",t.multiStoreProductitem)}}function b(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"app-pick",8),o.NdJ("valueChange",function(e){return o.CHM(t),o.oxw().IncommingItems(e)}),o.qZA()}if(2&t){const t=o.oxw();o.Q6J("multiStoreProducts",t.multiStoreService)}}function P(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"app-pick",8),o.NdJ("valueChange",function(e){return o.CHM(t),o.oxw().IncommingItems(e)}),o.qZA()}if(2&t){const t=o.oxw();o.Q6J("multiStoreProducts",t.multiStoreList)}}let I=(()=>{class t{constructor(t,e,i,s,o,r,n,c){this.modalController=t,this.rangeByStoreService=e,this.getStoreName=i,this.resourceService=s,this.restApiService=o,this.saveRandom=r,this.authService=n,this.notif=c,this.products=[],this.productRestoItem=[],this.packs=[],this.packs2=[],this.allProducts=[],this.totalItems=0,this.totalPrice=0,this.isItemAvailable=!1,this.isItemAvailable2=!1,this.btnProducts=!1,this.btnAllProducts=!1,this.btnResto=!1,this.btnPack=!0,this.isLoading=!1,this.tabRoles=[],this.multiStoreResourceitem=[],this.multiStoreList=[],this.multiStoreService=[],this.totalBtl=0,this.afficheResource=!1,JSON.parse(localStorage.getItem("adminUser"))&&JSON.parse(localStorage.getItem("adminUser")).storeType&&(this.storeTypeTab=JSON.parse(localStorage.getItem("adminUser")).storeType,(this.storeTypeTab.includes("bar")||this.storeTypeTab.includes("resto"))&&this.storeTypeTab.push("resource"),this.pet=this.storeTypeTab[0])}ngOnInit(){}ionViewWillEnter(){this.getItems(),this.storeTypeTab=JSON.parse(localStorage.getItem("adminUser")).storeType,this.pet=this.storeTypeTab[0],this.pet=this.storeTypeTab[0]}getItems(){this.takePack(),setTimeout(()=>{this.takeProduct(),this.takeProductListShop(),this.takeProductServiceList()},500),setTimeout(()=>{this.takeProductResto()},1e3)}closeModal(){this.modalController.dismiss("erico")}takeProduct(){return(0,s.mG)(this,void 0,void 0,function*(){this.restApiService.getProductItem().subscribe(t=>(0,s.mG)(this,void 0,void 0,function*(){this.products=t,this.products.length>0&&this.rangeByStoreService.rangeProductByStore(this.products).then(t=>{console.log("this",t),this.multiStoreProductitem=t[0]})}))})}takePackitems(){return(0,s.mG)(this,void 0,void 0,function*(){})}removeToPack(t){return new Promise((e,i)=>{this.packs=this.packs.find(e=>e.productId!==t._id),console.log("========"),console.log(this.packs),e("ok")})}takePack(){this.restApiService.getPack().subscribe(t=>(0,s.mG)(this,void 0,void 0,function*(){t.forEach(t=>{t.name.replace(/\s/g,""),t.name=t.name.toUpperCase()}),t.sort((t,e)=>t.name>e.name?1:e.name>t.name?-1:0),this.packs=t,JSON.parse(localStorage.getItem("setting"))}))}getResources(){this.resourceService.getResourcesItem().subscribe(t=>{this.resourceItem=t.resources.filter(t=>0==t.desabled),this.rangeByStoreService.rangeProductByStore(this.resourceItem).then(t=>{console.log(t),this.multiStoreResourceitem=t[0]})})}takeProductResto(){this.restApiService.getManufacturedProductItemResto2().subscribe(t=>(0,s.mG)(this,void 0,void 0,function*(){this.rangeByStoreService.rangeProductByStore(t).then(t=>{this.productRestoItem=t[0],console.log("resto ici",this.productRestoItem),console.log(this.productRestoItem)})}))}takeProductServiceList(){this.restApiService.getBillardList().subscribe(t=>(0,s.mG)(this,void 0,void 0,function*(){let e=yield this.rangeByStoreService.rangeProductByStore(t.product);console.log("service list tab",e),this.multiStoreService=e[0]}))}takeProductListShop(){this.restApiService.getShopList().subscribe(t=>(0,s.mG)(this,void 0,void 0,function*(){let e=yield this.rangeByStoreService.rangeProductByStore(t.product);this.multiStoreList=e[0],console.log("product list tab",this.multiStoreList)}))}IncommingItems(t){}segmentChanged(t){this.afficheResource=!1,console.log("Segment changed",t.target.value)}save(){this.notif.presentLoading(),this.authService.updateEmployee(this.saveRandom.getRetailer()).subscribe(t=>{this.notif.dismissLoading(),this.notif.presentToast("sauvegard\xe9 avec succ\xe9","success"),this.modalController.dismiss()},t=>{this.notif.dismissLoading(),this.notif.presentToast("erreur de sauvegarde certains param\xe9tres sont incorrect ou verifier votre connexion internet","danger")})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(r.IN),o.Y36(n.n),o.Y36(c.$),o.Y36(a.z),o.Y36(u.e),o.Y36(l.i),o.Y36(d.u),o.Y36(h.g))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-employee-retailer-product-add"]],decls:15,vars:6,consts:[["slot","end"],[3,"click"],["slot","icon-only","name","close"],["fill","outline",3,"click"],["scrollable","",3,"value","ngModel","ionChange","ngModelChange"],["class","btnseg",3,"value",4,"ngFor","ngForOf"],[3,"multiStoreProducts","valueChange",4,"ngIf"],[1,"btnseg",3,"value"],[3,"multiStoreProducts","valueChange"]],template:function(t,e){1&t&&(o.TgZ(0,"ion-header"),o.TgZ(1,"ion-toolbar"),o._UZ(2,"ion-title"),o.TgZ(3,"ion-buttons",0),o.TgZ(4,"ion-button",1),o.NdJ("click",function(){return e.closeModal()}),o._UZ(5,"ion-icon",2),o.qZA(),o.qZA(),o.TgZ(6,"ion-buttons",0),o.TgZ(7,"ion-button",3),o.NdJ("click",function(){return e.save()}),o._uU(8," SAVE "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(9,"ion-content"),o.TgZ(10,"ion-segment",4),o.NdJ("ionChange",function(t){return e.segmentChanged(t)})("ngModelChange",function(t){return e.pet=t}),o.YNc(11,k,2,2,"ion-segment-button",5),o.qZA(),o.YNc(12,T,1,1,"app-pick",6),o.YNc(13,b,1,1,"app-pick",6),o.YNc(14,P,1,1,"app-pick",6),o.qZA()),2&t&&(o.xp6(10),o.s9C("value",e.pet),o.Q6J("ngModel",e.pet),o.xp6(1),o.Q6J("ngForOf",e.storeTypeTab),o.xp6(1),o.Q6J("ngIf","bar"===e.pet&&!e.afficheResource),o.xp6(1),o.Q6J("ngIf","services"===e.pet&&!e.afficheResource),o.xp6(1),o.Q6J("ngIf","shop"===e.pet&&!e.afficheResource))},directives:[r.Gu,r.sr,r.wd,r.Sm,r.YG,r.gu,r.W2,r.cJ,r.QI,p.JJ,p.On,g.sg,g.O5,r.GO,Z],styles:[""]}),t})()},1044:(t,e,i)=>{"use strict";i.d(e,{n:()=>n});var s=i(4762),o=i(1572),r=i(9719);let n=(()=>{class t{constructor(t){this.getStoreName=t}rangeProductByStore(t){return new Promise((e,i)=>{let o=t.reduce((t,e)=>(t[e.storeId]=[...t[e.storeId]||[],e],t),{}),r=[];for(const t in o)r.push(o[t]);r.forEach(t=>(0,s.mG)(this,void 0,void 0,function*(){let e=yield this.getStoreName.takeName(t);t.storeName=e})),e(r)})}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(r.$))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);